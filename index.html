<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Magazin Bisericesc</title>
  <!-- Bootstrap pentru stilizare rapidă -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    /* HEADER și FOOTER cu gradient de roșu închis */
    header, footer {
      background: linear-gradient(135deg, #500000, #a30000);
      color: #fff;
      padding: 10px 20px;
    }
    header img.logo { height: 50px; }
    nav ul {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
    }
    /* Am eliminat textul "Coș" din meniu, păstrând doar iconița */
    nav ul li a {
      color: #fff;
      font-weight: bold;
      text-decoration: none;
      cursor: pointer;
    }
    .cart-icon {
      position: relative;
      display: inline-block;
      cursor: pointer;
    }
    .cart-icon img { height: 24px; }
    .cart-icon .badge {
      position: absolute;
      top: -5px;
      right: -10px;
      background: yellow;
      color: #000;
      border-radius: 50%;
      padding: 2px 6px;
      font-size: 0.8rem;
    }
    /* Container principal – aspect modern */
    .main-container {
      background-color: #fff;
      margin: 20px auto;
      padding: 20px;
      max-width: 1200px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    /* Delimitarea secțiunilor cu o linie roșie subțire */
    section {
      border-top: 3px solid #a30000;
      padding-top: 20px;
      margin-top: 20px;
    }
    /* Tranziție între pagini (fade in/out) */
    .page {
      opacity: 0;
      transition: opacity 0.5s ease;
      display: none;
    }
    .page.active-page {
      display: block;
      opacity: 1;
    }
    /* Carduri pentru produse – uniforme și cu efect de scaling */
    .product-card {
      border: 1px solid #ccc;
      border-radius: 5px;
      overflow: hidden;
      background-color: #f8f9fa;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .product-card:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .product-card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      cursor: pointer;
    }
    .product-card .card-body {
      padding: 15px;
      flex-grow: 1;
    }
    /* Butonul de "Adaugă în Coș" lărgit */
    .add-cart-btn {
      width: 100%;
    }
    #filter-input {
      max-width: 400px;
      margin-bottom: 20px;
    }
    footer { text-align: center; }
    /* Slider pe pagina de start – produse ușor transparente */
    .slider-container {
      overflow: hidden;
      position: relative;
      height: 150px;
      margin-top: 20px;
      opacity: 0.6;
    }
    .slider-track {
      display: flex;
      width: max-content;
      animation: slide 20s linear infinite;
    }
    .slider-track img {
      margin-right: 10px;
      height: 150px;
      width: auto;
      border-radius: 5px;
    }
    @keyframes slide {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }
    /* Stil text atractiv pentru Despre noi și Termeni */
    .attractive-text {
      font-size: 1.1rem;
      line-height: 1.6;
      color: #333;
    }
    /* Butoane – efect de transformare la click */
    button {
      transition: transform 0.1s ease, background-color 0.2s ease;
    }
    button:active { transform: scale(0.98); }
    /* Buton Back to Top */
    #backToTop {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 100;
      background: #a30000;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 1.5rem;
      display: none;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    #backToTop:hover { background: #7a0000; }
    /* Stil pentru fereastra de factură – folosim Times New Roman */
    .invoice {
      max-width: 800px;
      margin: 20px auto;
      padding: 20px;
      font-family: "Times New Roman", Times, serif;
    }
    .invoice h2, .invoice p, .invoice table {
      margin: 0 0 10px;
      padding: 0;
    }
    .invoice table {
      width: 100%;
      border-collapse: collapse;
    }
    .invoice table, .invoice table th, .invoice table td {
      border: 1px solid #000;
    }
    .invoice table th, .invoice table td {
      padding: 5px;
      text-align: left;
    }
    /* Responsive */
    @media (max-width: 768px) {
      nav ul { justify-content: center; }
      .main-container { margin: 10px; padding: 15px; }
      .product-card img { height: 150px; }
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="d-flex justify-content-between align-items-center flex-wrap">
    <div class="d-flex align-items-center">
      <img src="logo.jpg" alt="Logo" class="logo me-2">
      <span class="fs-4">Magazin Bisericesc</span>
    </div>
    <nav>
      <ul>
        <li><a onclick="navigateTo('home')">Acasă</a></li>
        <li><a onclick="navigateTo('produse')">Produse</a></li>
        <li><a onclick="navigateTo('despre')">Despre noi</a></li>
        <li><a onclick="navigateTo('termeni')">Termeni & Condiții</a></li>
        <li><a onclick="navigateTo('calendar')">Calendar</a></li>
        <li><a onclick="navigateTo('admin')">Admin</a></li>
      </ul>
    </nav>
    <!-- Păstrăm doar iconița de coș -->
    <div class="cart-icon" onclick="navigateTo('cos')">
      <img src="cos.jpg" alt="Coș">
      <span class="badge" id="cart-count">0</span>
    </div>
  </header>
  
  <!-- Timer dinamic -->
  <div class="text-center py-2" style="background-color:#fff;">
    <span id="timer" class="fs-5 text-danger"></span>
  </div>
  
  <!-- CONȚINUT PRINCIPAL -->
  <main class="main-container" id="content">
    <!-- Pagina de start -->
    <section id="home" class="page active-page">
      <div class="text-center py-5">
        <h1>Bine ați venit la Magazinul Bisericesc</h1>
        <p>Descoperă produsele noastre pentru momente de spiritualitate!</p>
        <!-- Butonul duce la Produse, dar în spate slider-ul este vizibil -->
        <button class="btn btn-dark mb-3" onclick="navigateTo('produse')">Vezi produsele</button>
        <div class="slider-container">
          <div class="slider-track" id="slider-track"></div>
        </div>
      </div>
    </section>
    
    <!-- Pagina Produse -->
    <section id="produse" class="page">
      <h2 class="mb-4">Produsele noastre</h2>
      <input type="text" id="filter-input" class="form-control" placeholder="Caută produs..." onkeyup="filterProducts()">
      <div id="products-container" class="row"></div>
    </section>
    
    <!-- Pagina Detalii Produs -->
    <section id="produs" class="page">
      <div id="produs-container"></div>
      <div class="text-center mt-3">
        <button class="btn btn-secondary" onclick="navigateTo('produse')">Înapoi la Produse</button>
      </div>
    </section>
    
    <!-- Pagina Despre noi -->
    <section id="despre" class="page">
      <h2>Despre noi</h2>
      <p class="attractive-text">
        Magazinul nostru Bisericesc a fost fondat din pasiune și dorința de a păstra tradițiile spirituale. Ne dedicăm cu grijă selecționării produselor care aduc lumină și inspirație în viața credincioșilor. Fiecare obiect este realizat manual sau ales cu atenție pentru a reflecta valorile autentice ale credinței. Experiența noastră îmbină tehnologia modernă cu tradiția, oferind o selecție variată și de calitate. Vă invităm să explorați universul nostru și să descoperiți povestea fiecărui produs, care aduce un strop de misticism și echilibru în viața dumneavoastră.
      </p>
    </section>
    
    <!-- Pagina Termeni și Condiții -->
    <section id="termeni" class="page">
      <h2>Termeni și Condiții</h2>
      <p class="attractive-text">
        Vă rugăm să citiți cu atenție acești termeni și condiții înainte de a utiliza site-ul nostru. Accesând platforma, vă angajați să respectați regulile stabilite și să utilizați informațiile oferite în mod responsabil. Datele colectate se folosesc doar pentru procesarea comenzilor și optimizarea experienței clienților. Ne rezervăm dreptul de a modifica în orice moment aceste condiții, iar utilizarea continuă a site-ului implică acceptarea celor mai recente actualizări. Dacă aveți întrebări sau nelămuriri, echipa noastră de suport este aici pentru a vă ajuta și pentru a asigura o experiență transparentă și profesionistă. Vă mulțumim că alegeți să faceți parte din comunitatea noastră!
      </p>
    </section>
    
    <!-- Pagina Calendar -->
    <section id="calendar" class="page">
      <h2>Calendar Creștin Ortodox – Aprilie</h2>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>Ziua</th>
            <th>Sărbătoare</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>1</td><td>Intrarea în Post</td></tr>
          <tr><td>14</td><td>Sfântul Vasile</td></tr>
          <tr><td>30</td><td>-</td></tr>
        </tbody>
      </table>
    </section>
    
    <!-- Pagina Coș -->
    <section id="cos" class="page">
      <h2>Coșul de Cumpărături</h2>
      <div id="cart-container"></div>
      <div class="mt-3">
        <button class="btn btn-danger" onclick="clearCart()">Clear Cart</button>
      </div>
      <div id="order-form" style="display:none;" class="mt-4">
        <h4>Date pentru comandă</h4>
        <div class="mb-3">
          <label>Nume:</label>
          <input type="text" id="customer-name" class="form-control">
        </div>
        <div class="mb-3">
          <label>Contact (Email/Telefon):</label>
          <input type="text" id="customer-contact" class="form-control">
        </div>
        <button class="btn btn-success" onclick="placeOrder()">Finalizează Comanda</button>
      </div>
    </section>
    
    <!-- Pagina Detalii Comandă -->
    <section id="order-details" class="page">
      <h2>Detalii Comandă</h2>
      <div id="order-details-container"></div>
      <div class="text-center mt-3">
        <button class="btn btn-secondary" onclick="navigateTo('home')">Înapoi Acasă</button>
      </div>
    </section>
    
    <!-- Pagina Admin -->
    <section id="admin" class="page">
      <h2>Admin</h2>
      <div id="admin-content"></div>
    </section>
  </main>
  
  <!-- Buton Back to Top -->
  <button id="backToTop" onclick="scrollToTop()">&#8679;</button>
  
  <!-- FOOTER -->
  <footer>
    <p>&copy; <span id="year"></span> Magazin Bisericesc. Toate drepturile rezervate.</p>
    <img src="anpc.jp" alt="Logo ANPC">
  </footer>
  
  <!-- JAVASCRIPT -->
  <script>
    // Tranziție între pagini (fade in/out)
    function navigateTo(pageId) {
      const current = document.querySelector('.active-page');
      if (current) {
        current.style.opacity = 0;
        setTimeout(() => {
          current.classList.remove('active-page');
          const target = document.getElementById(pageId);
          target.classList.add('active-page');
          target.style.opacity = 0;
          setTimeout(() => { target.style.opacity = 1; }, 50);
        }, 500);
      } else {
        const target = document.getElementById(pageId);
        target.classList.add('active-page');
        target.style.opacity = 1;
      }
      if (pageId === 'admin') loadAdmin();
      if (pageId === 'produse') fetchProductsFromBackend();
    }
    
    // Back to Top
    window.onscroll = function() { scrollFunction(); };
    function scrollFunction() {
      const btn = document.getElementById("backToTop");
      if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
        btn.style.display = "block";
      } else {
        btn.style.display = "none";
      }
    }
    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    document.getElementById('year').textContent = new Date().getFullYear();
    
    // Timer până la Paști (ex: 20 aprilie 2025)
    function startTimer() {
      let easterDate = new Date("2025-04-20T00:00:00").getTime();
      let timerElem = document.getElementById("timer");
      setInterval(() => {
        let now = new Date().getTime();
        let distance = easterDate - now;
        let days = Math.floor(distance / (1000 * 60 * 60 * 24));
        let hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        let minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        let seconds = Math.floor((distance % (1000 * 60)) / 1000);
        if (distance > 0) { 
          timerElem.textContent = "Timp până la Paști: " + days + "z " + hours + "h " + minutes + "m " + seconds + "s"; 
        } else { 
          timerElem.textContent = "Hristos a înviat! Următoarea promoție se anunță în curând."; 
        }
      }, 1000);
    }
    startTimer();
    
    /* ---- Funcționalități Produse & Stocuri ---- */
    // Produsele au acum o proprietate suplimentară labels
    const products = [
      {id: 1, name: "Candelă mare TIP IV", price: 19.99, image: "1.jpg", description: "Lumânare din ceară naturală cu o lungă durata de viață.7 zile", stock: 50, labels: ["Popular"]},
      {id: 2, name: "Candelă mare TIP III", price: 12.99, image: "2.jpg", description: "Lumânare din ceară naturală cu o lungă durata de viață.100h", stock: 40, labels: ["Recomandat"]},
      {id: 3, name: "Candelă mare TIP II", price: 9.99, image: "3.jpg", description: "Lumânare din ceară naturală cu o lungă durata de viață.60h", stock: 30, labels: ["Best Seller"]},
      {id: 4, name: "Candelă mare TIP I", price: 6.99, image: "4.jpg", description: "Lumânare din ceară naturală cu o lungă durata de viață.16h", stock: 60, labels: ["Pentru zile negre"]},
      {id: 5, name: "Tămâie de Oașă", price: 63.99, image: "5.jpg", description: "Tămâie de înaltă calitate.200g", stock: 80, labels: ["Bună pentru uz zilnic"]},
      {id: 6, name: "Tămâie de Vatopedu", price: 68.99, image: "6.jpg", description: "Tămâie de înaltă calitate.200g", stock: 70, labels: ["Premium"]},
      {id: 7, name: "Tămâie de Pângărați", price: 23.99, image: "7.jpg", description: "Tămâie de înaltă calitate.50g", stock: 35, labels: ["Cantitate mai mică"]},
      {id: 8, name: "Acatiste și Viețile sfinților", price: 9.99, image: "8.jpg", description: "La nevoi și necazuri cel mai bun ajutor.În diferite formate cel mai des întâlit este cel 11*16", stock: 45, labels: ["Nou"]},
      {id: 9, name: "Psaltire", price: 29.99, image: "9.jpg", description: "Unul dintre cele mai importante lucruri care trebuie să fie în casă.14.5*20cm", stock: 55, labels: ["Recomandat"]},
      {id: 10, name: "Ceaslov", price: 44.99, image: "10.jpg", description: "Un ajutor important la rugăciunea casei.A4", stock: 50, labels: ["Recomandat"]},
      {id: 11, name: "Lumânare Înviere", price: 44.99, image: "11.jpg", description: "Lumânare cu design modern pentru realizarea slujbei de înviere.", stock: 60, labels: ["Nou"]},
      {id: 12, name: "Icoană TIP I", price: 25.99, image: "12.jpg", description: "Icoană rugăciuni.A4", stock: 40, labels: ["Pentru zile negre"]},
      {id: 13, name: "Icoană TIP II", price: 22.99, image: "13.jpg", description: "Icoană pentru rugăciuni.A5", stock: 30, labels: ["Recomandat"]},
      {id: 14, name: "Icoană TIP III", price: 19.99, image: "14.jpg", description: "Icoană pentru rugăciuni.24*10", stock: 45, labels: ["Special"]},
      {id: 15, name: "Icoană TIP IV", price: 139.99, image: "15.jpg", description: "Icoană pentru rugăciuni.A4", stock: 20, labels: ["Limited Edition"]},
      {id: 16, name: "Cruciuliță", price: 12.99, image: "16.jpg", description: "Un simbol protector al credinței,dar si a persoanei ce o poartă.5*3cm", stock: 100, labels: ["Special"]},
      {id: 17, name: "Cruce binecuvântare", price: 149.99, image: "17.jpg", description: "Realizată pentru slujbe.30*13cm", stock: 25, labels: ["Limited Edition"]},
      {id: 18, name: "Mir de oașă", price: 9.99, image: "18.jpg", description: "Un lucru mic pentru o familie mare.", stock: 30, labels: ["Pentru zile negre"]},
      {id: 19, name: "pomelnice anuale", price: 99.99, image: "19.jpg", description: "Pentru a vă aminti de cei dragi vouă.", stock: 15, labels: ["Special"]},
      {id: 20, name: "Biblia", price: 149.99 , image: "20.jpg", description: "O carte obligatorie pentru orice creștin.21*15cm", stock: 40, labels: ["Recomandat"]}
    ];
    
    let cart = [];
    
    // Funcție de simulare: preia stocurile din "backend" – aici folosim direct datele din obiectul products
    function fetchProductsFromBackend() { renderProducts(); }
    
    function renderProducts() {
      const container = document.getElementById('products-container');
      container.innerHTML = "";
      const filterValue = document.getElementById('filter-input').value.toLowerCase();
      products.forEach(prod => {
        if (prod.name.toLowerCase().includes(filterValue)) {
          const col = document.createElement('div');
          col.className = "col-md-4 mb-4";
          col.innerHTML = `
            <div class="product-card h-100">
              <img src="${prod.image}" alt="${prod.name}" onclick="viewProduct(${prod.id})">
              <div class="card-body">
                <h5>${prod.name}</h5>
                <p>Preț: ${prod.price.toFixed(2)} Lei</p>
                <p>Stoc: <span id="stock-${prod.id}">${prod.stock}</span></p>
                ${prod.labels.length ? `<p>${prod.labels.map(l => `<span class="badge bg-info text-dark me-1">${l}</span>`).join("")}</p>` : ""}
              </div>
              <div class="p-2">
                <div class="input-group" style="max-width:120px;">
                  <input type="number" id="qty-${prod.id}" value="1" min="1" class="form-control">
                  <button class="btn btn-danger btn-sm add-cart-btn" onclick="addToCart(${prod.id}, 'list')">Adaugă în Coș</button>
                </div>
              </div>
            </div>`;
          container.appendChild(col);
        }
      });
    }
    
    function filterProducts() { renderProducts(); }
    
    function viewProduct(id) {
      const prod = products.find(p => p.id === id);
      if (!prod) return;
      const container = document.getElementById('produs-container');
      let labelsHtml = "";
      if (prod.labels && prod.labels.length) {
        labelsHtml = prod.labels.map(l => `<span class="badge bg-info text-dark me-1">${l}</span>`).join("");
      }
      container.innerHTML = `
        <div class="row">
          <div class="col-md-6">
            <img src="${prod.image}" alt="${prod.name}" class="img-fluid">
          </div>
          <div class="col-md-6">
            <h2>${prod.name}</h2>
            <p>${prod.description}</p>
            ${labelsHtml ? `<p>${labelsHtml}</p>` : ""}
            <p><strong>Preț:</strong> ${prod.price.toFixed(2)} Lei</p>
            <p><strong>Stoc disponibil:</strong> <span id="detail-stock-${prod.id}">${prod.stock}</span></p>
            <div class="input-group" style="max-width:120px;">
              <input type="number" id="detail-qty-${prod.id}" value="1" min="1" class="form-control">
              <button class="btn btn-danger add-cart-btn" onclick="addToCart(${prod.id}, 'detail')">Adaugă în Coș</button>
            </div>
          </div>
        </div>`;
      navigateTo('produs');
    }
    
    function addToCart(id, source = 'list') {
      const qtyInput = (source === 'list') ? document.getElementById(`qty-${id}`) : document.getElementById(`detail-qty-${id}`);
      let qty = parseInt(qtyInput.value) || 1;
      const prod = products.find(p => p.id === id);
      if (prod.stock < qty) { alert("Nu există suficient stoc!"); return; }
      prod.stock -= qty;
      document.getElementById(`stock-${id}`) && (document.getElementById(`stock-${id}`).textContent = prod.stock);
      document.getElementById(`detail-stock-${id}`) && (document.getElementById(`detail-stock-${id}`).textContent = prod.stock);
      let index = cart.findIndex(item => item.id === id);
      if (index > -1) { cart[index].quantity += qty; }
      else { cart.push({ id: id, quantity: qty }); }
      updateCartCount();
      console.log("Cart:", cart);
      alert(`Produsul "${prod.name}" a fost adăugat în coș.`);
    }
    
    function updateCartCount() {
      let total = cart.reduce((sum, item) => sum + item.quantity, 0);
      document.getElementById('cart-count').textContent = total;
      renderCart();
    }
    
    function renderCart() {
      const container = document.getElementById('cart-container');
      if (cart.length === 0) {
        container.innerHTML = "<p>Coșul este gol.</p>";
        document.getElementById('order-form').style.display = "none";
        return;
      }
      let html = `<table class="table">
                    <thead>
                      <tr>
                        <th>Produs</th>
                        <th>Cantitate</th>
                        <th>Preț</th>
                        <th>Total</th>
                        <th>Acțiune</th>
                      </tr>
                    </thead>
                    <tbody>`;
      let grandTotal = 0;
      cart.forEach((item, index) => {
        let prod = products.find(p => p.id === item.id);
        let total = prod.price * item.quantity;
        grandTotal += total;
        html += `<tr>
                   <td>${prod.name}</td>
                   <td>${item.quantity}</td>
                   <td>${prod.price.toFixed(2)}</td>
                   <td>${total.toFixed(2)}</td>
                   <td><button class="btn btn-warning btn-sm" onclick="removeFromCart(${index})">Șterge</button></td>
                 </tr>`;
      });
      html += `<tr>
                 <td colspan="3" class="text-end"><strong>Total General:</strong></td>
                 <td colspan="2"><strong>${grandTotal.toFixed(2)} Lei</strong></td>
               </tr>`;
      html += `</tbody></table>`;
      container.innerHTML = html;
      document.getElementById('order-form').style.display = "block";
    }
    
    function removeFromCart(index) {
      const removed = cart.splice(index, 1)[0];
      const prod = products.find(p => p.id === removed.id);
      prod.stock += removed.quantity;
      document.getElementById(`stock-${prod.id}`) && (document.getElementById(`stock-${prod.id}`).textContent = prod.stock);
      document.getElementById(`detail-stock-${prod.id}`) && (document.getElementById(`detail-stock-${prod.id}`).textContent = prod.stock);
      updateCartCount();
    }
    
    function clearCart() {
      cart.forEach(item => {
        const prod = products.find(p => p.id === item.id);
        prod.stock += item.quantity;
      });
      cart = [];
      updateCartCount();
      renderProducts();
    }
    
    // Plasează comanda: salvează în localStorage și afișează pagina de Detalii Comandă
    function placeOrder() {
      const name = document.getElementById('customer-name').value.trim();
      const contact = document.getElementById('customer-contact').value.trim();
      if (name === "" || contact === "") { alert("Completează datele de contact!"); return; }
      if (cart.length === 0) { alert("Coșul este gol!"); return; }
      let orderTotal = cart.reduce((sum, item) => {
        const prod = products.find(p => p.id === item.id);
        return sum + (prod.price * item.quantity);
      }, 0);
      let order = {
        id: Date.now(),
        customer: { name, contact },
        items: [...cart],
        total: orderTotal
      };
      let orders = JSON.parse(localStorage.getItem("globalOrders") || "[]");
      orders.push(order);
      localStorage.setItem("globalOrders", JSON.stringify(orders));
      alert("Comanda a fost plasată. Mulțumim, " + name + "!");
      renderOrderDetails(order);
      cart = [];
      updateCartCount();
      document.getElementById('customer-name').value = "";
      document.getElementById('customer-contact').value = "";
      renderProducts();
      navigateTo('order-details');
    }
    
    // Afișează detaliile comenzii (inclusiv etichetele produselor) în secțiunea "order-details"
    function renderOrderDetails(order) {
      const container = document.getElementById('order-details-container');
      let html = `<p><strong>Client:</strong> ${order.customer.name}</p>
                  <p><strong>Contact:</strong> ${order.customer.contact}</p>
                  <p><strong>Furnizor:</strong> Magazin Bisericesc, Str. Exemplu 123, Oraș, Telefon: 0123 456 789</p>
                  <table class="table">
                    <thead>
                      <tr>
                        <th>Produs</th>
                        <th>Etichete</th>
                        <th>Cantitate</th>
                        <th>Preț</th>
                        <th>Total</th>
                      </tr>
                    </thead>
                    <tbody>`;
      let grandTotal = 0;
      order.items.forEach(item => {
        const prod = products.find(p => p.id === item.id);
        let total = prod.price * item.quantity;
        grandTotal += total;
        let labelsHtml = "";
        if (prod.labels && prod.labels.length) {
          labelsHtml = prod.labels.map(l => `<span class="badge bg-secondary me-1">${l}</span>`).join("");
        }
        html += `<tr>
                   <td>${prod.name}</td>
                   <td>${labelsHtml}</td>
                   <td>${item.quantity}</td>
                   <td>${prod.price.toFixed(2)}</td>
                   <td>${total.toFixed(2)}</td>
                 </tr>`;
      });
      html += `</tbody></table>
               <p><strong>Total Comandă:</strong> ${order.total.toFixed(2)} Lei</p>`;
      container.innerHTML = html;
    }
    
    /* ---- Funcționalități Admin ---- */
    let adminLogged = false;
    function loadAdmin() {
      const adminDiv = document.getElementById('admin-content');
      if (!adminLogged) {
        adminDiv.innerHTML = `
          <h4>Login Admin</h4>
          <div class="mb-3">
            <label>Utilizator:</label>
            <input type="text" id="admin-user" class="form-control">
          </div>
          <div class="mb-3">
            <label>Parolă:</label>
            <input type="password" id="admin-pass" class="form-control">
          </div>
          <button class="btn btn-primary" onclick="adminLogin()">Login</button>
        `;
      } else {
        adminDiv.innerHTML = `
          <h4>Dashboard Admin</h4>
          <div class="d-flex gap-2 mb-3">
            <button class="btn btn-secondary" onclick="resetAllStocks()">Reset All Stocks</button>
          </div>
          <h5>Filtrare Produse</h5>
          <input type="text" id="admin-filter" class="form-control mb-3" placeholder="Caută produs în admin..." onkeyup="renderAdminProducts()">
          <div id="admin-products-container" class="mb-4"></div>
          <h5>Comenzi Plasate</h5>
          <div id="admin-orders-container"></div>
          <button class="btn btn-secondary mt-3" onclick="adminLogout()">Logout</button>
        `;
        renderAdminProducts();
        renderAdminOrders();
      }
    }
    
    function adminLogin() {
      const user = document.getElementById('admin-user').value.trim();
      const pass = document.getElementById('admin-pass').value.trim();
      if (user === "admin" && pass === "parola123") { adminLogged = true; loadAdmin(); }
      else { alert("Autentificare eșuată!"); }
    }
    
    function adminLogout() { adminLogged = false; loadAdmin(); }
    
    function renderAdminProducts() {
      const container = document.getElementById('admin-products-container');
      container.innerHTML = "";
      const filter = document.getElementById('admin-filter').value.toLowerCase();
      products.forEach(prod => {
        if (prod.name.toLowerCase().includes(filter)) {
          const prodHTML = `
            <div class="mb-2 p-2" style="border:1px solid #ccc; border-radius:5px;">
              <strong>${prod.name}</strong> - Stoc: <span id="admin-stock-${prod.id}">${prod.stock}</span>
              <input type="number" id="new-stock-${prod.id}" placeholder="Nou stoc" style="width:70px; margin-left:10px;">
              <button class="btn btn-warning btn-sm ms-2" onclick="updateProductStockCustom(${prod.id})">Setează stoc</button>
            </div>`;
          container.innerHTML += prodHTML;
        }
      });
    }
    
    function updateProductStockCustom(id) {
      const newStock = parseInt(document.getElementById(`new-stock-${id}`).value) || 0;
      const prod = products.find(p => p.id === id);
      prod.stock = newStock;
      document.getElementById(`admin-stock-${id}`).textContent = prod.stock;
      document.getElementById(`stock-${id}`) && (document.getElementById(`stock-${id}`).textContent = prod.stock);
      document.getElementById(`detail-stock-${id}`) && (document.getElementById(`detail-stock-${id}`).textContent = prod.stock);
      alert("Stocul pentru " + prod.name + " a fost actualizat la " + newStock + ".");
    }
    
    function resetAllStocks() {
      const initialStocks = {
        1: 50, 2: 40, 3: 30, 4: 60, 5: 80, 6: 70, 7: 35,
        8: 45, 9: 55, 10: 50, 11: 60, 12: 40, 13: 30, 14: 45, 15: 20,
        16: 100, 17: 25, 18: 30, 19: 15, 20: 40
      };
      products.forEach(prod => { prod.stock = initialStocks[prod.id] || prod.stock; });
      alert("Stocurile pentru toate produsele au fost resetate.");
      renderProducts();
      renderAdminProducts();
    }
    
    function renderAdminOrders() {
      const orders = JSON.parse(localStorage.getItem("globalOrders") || "[]");
      const container = document.getElementById('admin-orders-container');
      if (orders.length === 0) { container.innerHTML = "<p>Nu există comenzi.</p>"; return; }
      let html = `<table class="table">
                    <thead>
                      <tr>
                        <th>ID Comandă</th>
                        <th>Client</th>
                        <th>Detalii Produse</th>
                        <th>Total</th>
                        <th>Acțiuni</th>
                      </tr>
                    </thead>
                    <tbody>`;
      orders.forEach((order, idx) => {
        let details = "";
        order.items.forEach(item => {
          const prod = products.find(p => p.id === item.id);
          let labelsHtml = "";
          if (prod.labels && prod.labels.length) {
            labelsHtml = prod.labels.map(l => `<span class="badge bg-secondary me-1">${l}</span>`).join("");
          }
          details += prod.name + " " + labelsHtml + " x " + item.quantity + "<br>";
        });
        html += `<tr>
                   <td>${order.id}</td>
                   <td>${order.customer.name}<br>${order.customer.contact}</td>
                   <td>${details}</td>
                   <td>${order.total.toFixed(2)} Lei</td>
                   <td>
                     <button class="btn btn-success btn-sm" onclick="finishOrder(${idx})">Terminată</button>
                     <button class="btn btn-info btn-sm" onclick="printInvoice(${idx})">Tipărește Factura</button>
                   </td>
                 </tr>`;
      });
      html += `</tbody></table>`;
      container.innerHTML = html;
    }
    
    function finishOrder(index) {
      let orders = JSON.parse(localStorage.getItem("globalOrders") || "[]");
      orders.splice(index, 1);
      localStorage.setItem("globalOrders", JSON.stringify(orders));
      alert("Comanda a fost finalizată.");
      renderAdminOrders();
    }
    
    function printInvoice(index) {
      let orders = JSON.parse(localStorage.getItem("globalOrders") || "[]");
      if (orders.length <= index) return;
      const order = orders[index];
      let invoiceWindow = window.open("", "PrintInvoice", "width=800,height=600");
      let htmlContent = `
        <html>
        <head>
          <title>Factura - Comanda ${order.id}</title>
          <style>
            body { font-family: "Times New Roman", Times, serif; padding: 20px; }
            h2, p, table { margin: 0 0 10px; padding: 0; }
            table { width: 100%; border-collapse: collapse; }
            table, th, td { border: 1px solid #000; }
            th, td { padding: 5px; text-align: left; }
          </style>
        </head>
        <body>
          <h2>Factura - Comanda ${order.id}</h2>
          <p><strong>Client:</strong> ${order.customer.name}</p>
          <p><strong>Contact:</strong> ${order.customer.contact}</p>
          <p><strong>Furnizor:</strong> Magazin Bisericesc, Str. Exemplu 123, Oraș, Telefon: 0123 456 789</p>
          <table>
            <thead>
              <tr>
                <th>Produs</th>
                <th>Etichete</th>
                <th>Cantitate</th>
                <th>Preț</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody>`;
      order.items.forEach(item => {
        const prod = products.find(p => p.id === item.id);
        const total = prod.price * item.quantity;
        let labelsHtml = "";
        if (prod.labels && prod.labels.length) {
          labelsHtml = prod.labels.map(l => `<span class="badge bg-secondary me-1">${l}</span>`).join("");
        }
        htmlContent += `<tr>
                          <td>${prod.name}</td>
                          <td>${labelsHtml}</td>
                          <td>${item.quantity}</td>
                          <td>${prod.price.toFixed(2)}</td>
                          <td>${total.toFixed(2)}</td>
                        </tr>`;
      });
      htmlContent += `</tbody>
          </table>
          <p><strong>Total Comandă:</strong> ${order.total.toFixed(2)} Lei</p>
        </body>
        </html>`;
      invoiceWindow.document.write(htmlContent);
      invoiceWindow.document.close();
      invoiceWindow.focus();
      invoiceWindow.print();
    }
    
    // Secțiunea de afișare a detaliilor comenzii (după finalizare)
    function renderOrderDetails(order) {
      const container = document.getElementById('order-details-container');
      let html = `<p><strong>Client:</strong> ${order.customer.name}</p>
                  <p><strong>Contact:</strong> ${order.customer.contact}</p>
                  <p><strong>Furnizor:</strong> Magazin Bisericesc, Str. Exemplu 123, Oraș, Telefon: 0123 456 789</p>
                  <table class="table">
                    <thead>
                      <tr>
                        <th>Produs</th>
                        <th>Etichete</th>
                        <th>Cantitate</th>
                        <th>Preț</th>
                        <th>Total</th>
                      </tr>
                    </thead>
                    <tbody>`;
      let grandTotal = 0;
      order.items.forEach(item => {
        const prod = products.find(p => p.id === item.id);
        let total = prod.price * item.quantity;
        grandTotal += total;
        let labelsHtml = "";
        if (prod.labels && prod.labels.length) {
          labelsHtml = prod.labels.map(l => `<span class="badge bg-secondary me-1">${l}</span>`).join("");
        }
        html += `<tr>
                   <td>${prod.name}</td>
                   <td>${labelsHtml}</td>
                   <td>${item.quantity}</td>
                   <td>${prod.price.toFixed(2)}</td>
                   <td>${total.toFixed(2)}</td>
                 </tr>`;
      });
      html += `</tbody></table>
               <p><strong>Total Comandă:</strong> ${order.total.toFixed(2)} Lei</p>`;
      container.innerHTML = html;
    }
    
    document.addEventListener("DOMContentLoaded", function() {
      fetchProductsFromBackend();
      renderSlider();
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
