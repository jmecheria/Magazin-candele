<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Magazin Bisericesc</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons (opțional, pentru icoane) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    html { scroll-behavior: smooth; }
    /* Stilizare generală */
    .section-container {
      border: 1px solid #a30000;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 20px;
      background-color: #fff;
      text-align: center;
    }
    .text-start { text-align: left !important; }
    table.table {
      border: 1px solid #a30000;
      border-collapse: collapse;
      width: 100%;
    }
    table.table th, table.table td {
      border: 1px solid #a30000 !important;
      padding: 8px;
      text-align: left;
    }
    header, footer {
      background: linear-gradient(135deg, #500000, #a30000);
      color: #fff;
      padding: 10px 20px;
      position: sticky;
      top: 0;
      z-index: 50;
    }
    header img.logo, footer img { height: 50px; }
    nav ul {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      justify-content: center;
    }
    nav ul li a {
      color: #fff;
      font-weight: bold;
      text-decoration: none;
      cursor: pointer;
    }
    .cart-icon {
      position: relative;
      display: inline-block;
      cursor: pointer;
    }
    .cart-icon img { height: 24px; }
    .cart-icon .badge {
      position: absolute;
      top: -5px;
      right: -10px;
      background: yellow;
      color: #000;
      border-radius: 50%;
      padding: 2px 6px;
      font-size: 0.8rem;
    }
    .main-container {
      background-color: #fff;
      margin: 80px auto 20px; /* Ajustat pentru header sticky */
      padding: 20px;
      max-width: 1200px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .section-container h2 {
      border-bottom: 2px solid #a30000;
      color: #a30000;
      padding-bottom: 5px;
      margin-bottom: 10px;
      text-align: center;
    }
    /* Toate paginile sunt ascunse inițial; clasa "active-page" le afișează */
    .page { display: none; }
    .page.active-page { display: block; }
    /* Stil produs (listare) */
    .product-card {
      border: 1px solid #ccc;
      border-radius: 5px;
      overflow: hidden;
      background-color: #f8f9fa;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      text-align: center;
      height: 100%;
    }
    .product-card:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .product-card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      cursor: pointer;
    }
    .product-card .card-body { padding: 15px; }
    .price-range { font-weight: bold; color: #a30000; }
    /* Stil modal produs: detalii atractive */
    .modal-details { text-align: left; }
    .quantity-controls {
      display: flex;
      align-items: center;
      gap: 5px;
      margin-top: 10px;
    }
    .quantity-controls button {
      border: 1px solid #a30000;
      background: #fff;
      color: #a30000;
      border-radius: 4px;
      width: 30px;
      height: 30px;
      font-size: 1rem;
      line-height: 1;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    .quantity-controls button:hover { background-color: #f8d7da; }
    .quantity-controls input {
      width: 60px;
      text-align: center;
      border: 1px solid #a30000;
      border-radius: 4px;
      height: 38px;
    }
    .add-cart-btn {
      border: 1px solid #a30000;
      background-color: #a30000;
      color: #fff;
      border-radius: 0 4px 4px 0;
      height: 38px;
      font-weight: bold;
      width: 100%;
      margin-top: 10px;
    }
    .add-cart-btn:hover { background-color: #7a0000; }
    #filter-input { max-width: 400px; margin: 0 auto 20px; }
    footer { text-align: center; margin-top: 20px; }
    /* Slider pagina de start */
    .slider-container {
      overflow: hidden;
      position: relative;
      height: 150px;
      margin-top: 20px;
      opacity: 0.6;
    }
    .slider-track {
      display: flex;
      width: max-content;
      animation: slide 20s linear infinite;
    }
    .slider-track img {
      width: 250px;
      height: 150px;
      object-fit: cover;
      margin-right: 10px;
      border-radius: 5px;
    }
    @keyframes slide {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }
    .attractive-text {
      font-size: 1.1rem;
      line-height: 1.6;
      color: #333;
      text-align: center;
    }
    button { transition: transform 0.1s ease, background-color 0.2s ease; }
    button:active { transform: scale(0.98); }
    #backToTop {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 100;
      background: #a30000;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 1.5rem;
      display: none;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    #backToTop:hover { background: #7a0000; }
    .invoice {
      max-width: 800px;
      margin: 20px auto;
      padding: 20px;
      font-family: "Times New Roman", Times, serif;
      background-color: #fff;
      border: 1px solid #000;
    }
    .invoice-header {
      text-align: center;
      margin-bottom: 20px;
    }
    .invoice-header img {
      height: 70px;
      margin-bottom: 10px;
    }
    .invoice-details {
      margin-bottom: 20px;
    }
    .invoice-details p {
      margin: 0 0 5px;
    }
    .invoice table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }
    .invoice table, .invoice table th, .invoice table td {
      border: 1px solid #000;
    }
    .invoice table th, .invoice table td {
      padding: 8px;
      text-align: center;
    }
    /* Carousel "Despre noi" */
    #aboutCarousel .carousel-item img {
      width: 600px;
      height: 400px;
      object-fit: cover;
      margin: 0 auto;
    }
    @media (max-width: 768px) {
      nav ul { justify-content: center; }
      .main-container { margin: 10px; padding: 15px; }
      .product-card img { height: 150px; }
    }
    /* Stil pentru blocul „Detalii firmă” */
    .company-details-card {
      background-color: #f5f5f5;
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 15px;
      margin-bottom: 20px;
      font-style: italic;
      color: #333;
    }
    .company-details-card h5 {
      margin-bottom: 10px;
      color: #a30000;
      font-weight: bold;
      font-style: normal;  /* păstrăm titlul în font normal */
    }
    .company-details-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .company-details-list li {
      margin-bottom: 8px;
      display: flex;
      align-items: center;
    }
    .company-details-list li i {
      color: #a30000;
      margin-right: 8px;
      font-size: 1.1rem;
    }
    .company-details-list li strong {
      font-style: normal;
      color: #333;
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="d-flex justify-content-between align-items-center flex-wrap">
    <div class="d-flex align-items-center">
      <img src="logo.jpg" alt="Logo" class="logo me-2">
      <span class="fs-4">Magazin Bisericesc</span>
    </div>
    <nav>
      <ul>
        <li><a onclick="navigateTo('home')">Acasă</a></li>
        <li><a onclick="navigateTo('produse')">Produse</a></li>
        <li><a onclick="navigateTo('despre')">Despre noi</a></li>
        <li><a onclick="navigateTo('termeni')">Termeni &amp; Condiții</a></li>
        <li><a onclick="navigateTo('calendar')">Calendar</a></li>
        <li><a onclick="navigateTo('admin')">Admin</a></li>
        <li><a onclick="navigateTo('cos')">Coș</a></li>
      </ul>
    </nav>
    <div class="cart-icon" onclick="navigateTo('cos')">
      <img src="cos.jpg" alt="Coș">
      <span class="badge" id="cart-count">0</span>
    </div>
  </header>

  <!-- Timer dinamic -->
  <div class="text-center py-2" style="background-color:#fff;">
    <span id="timer" class="fs-5 text-danger"></span>
  </div>

  <!-- CONȚINUT PRINCIPAL -->
  <main class="main-container" id="content">
    <!-- Pagina de start -->
    <section id="home" class="page active-page">
      <div class="section-container">
        <h2>Bine ați venit la Magazinul Bisericesc</h2>
        <div class="text-center py-3">
          <p>Descoperă produsele noastre pentru momente de liniște sufletească!</p>
          <button class="btn btn-dark mb-3" onclick="navigateTo('produse')">Vezi produsele</button>
          <div class="slider-container">
            <div class="slider-track" id="slider-track"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Pagina Produse -->
    <section id="produse" class="page">
      <div class="section-container">
        <h2>Produsele noastre</h2>
        <input type="text" id="filter-input" class="form-control mb-3" placeholder="Caută produs..." onkeyup="renderProducts()">
        <div id="products-container" class="row"></div>
      </div>
    </section>

    <!-- Pagina Detalii Produs -->
    <section id="produs" class="page">
      <div class="section-container text-start">
        <div id="produs-container"></div>
        <div id="modal-controls" class="mt-3"></div>
        <div class="text-center mt-3">
          <button class="btn btn-secondary" onclick="navigateTo('produse')">Înapoi la Produse</button>
        </div>
      </div>
    </section>

    <!-- Pagina Despre noi -->
    <section id="despre" class="page">
      <div class="section-container">
        <h2>Despre noi</h2>
        <p class="attractive-text">
          Magazinul Bisericesc se remarcă prin pasiunea pentru tradiție și credință. 
          Fondat pentru a oferi obiecte de cult de cea mai înaltă calitate, colaborăm cu meșteri locali dedicați care își pun inima în fiecare lucrare. 
          Oferta noastră reunește atât obiecte artizanale, cât și accesorii moderne, toate selectate cu atenție pentru a oferi o experiență autentică. 
          Ne mândrim cu transparența informațiilor tehnice despre fiecare produs, pentru ca tu să te simți în siguranță în alegerea ta.
        </p>
        <!-- Carousel "Despre noi" -->
        <div id="aboutCarousel" class="carousel slide mt-3" data-bs-ride="carousel" data-bs-touch="true">
          <div class="carousel-inner">
            <div class="carousel-item active">
              <img src="21.jpg" class="d-block w-100" alt="Biserica 1">
            </div>
            <div class="carousel-item">
              <img src="22.jpg" class="d-block w-100" alt="Biserica 2">
            </div>
            <div class="carousel-item">
              <img src="23.jpg" class="d-block w-100" alt="Producție 1">
            </div>
            <div class="carousel-item">
              <img src="24.jpg" class="d-block w-100" alt="Producție 2">
            </div>
            <div class="carousel-item">
              <img src="25.jpg" class="d-block w-100" alt="Producție 3">
            </div>
            <div class="carousel-item">
              <img src="26.jpg" class="d-block w-100" alt="Producție 4">
            </div>
            <div class="carousel-item">
              <img src="27.jpg" class="d-block w-100" alt="Producție 5">
            </div>
          </div>
          <button class="carousel-control-prev" type="button" data-bs-target="#aboutCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#aboutCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
      </div>
    </section>

    <!-- Pagina Termeni și Condiții -->
    <section id="termeni" class="page">
      <div class="section-container">
        <h2>Termeni și Condiții</h2>
        <ul class="list-group list-group-flush text-start">
          <li class="list-group-item"><strong>Denumire produs și preț:</strong> Fiecare produs are afișat prețul final, cu TVA (19%) și adaos comercial (30%) incluse. Prețul afișat este cel de vânzare final.</li>
          <li class="list-group-item"><strong>Modalități de plată:</strong> Ramburs, card (Visa, MasterCard, Maestro), transfer bancar.</li>
          <li class="list-group-item"><strong>Livrare:</strong> 1–3 zile lucrătoare prin curier, cost variabil în funcție de zonă.</li>
          <li class="list-group-item"><strong>Politica de returnare:</strong> Returnare în 14 zile de la primire, fără penalități; costul transportului retur este suportat de client.</li>
          <li class="list-group-item"><strong>Garanție:</strong> 24 luni de la data achiziției, valabilă pe teritoriul României.</li>
          <li class="list-group-item"><strong>Salvarea și protecția datelor:</strong> Datele tale personale sunt prelucrate conform <a href="#">Politicii GDPR</a> și nu sunt cessionate către terți.</li>
          <li class="list-group-item"><strong>Soluționare alternativă a litigiilor (SAL):</strong> Poți solicita medierea divergențelor la ANPC sau la Centrul de Soluționare Alternativă a Litigiilor de Consum – vezi pictograma SAL/SOL din footer.</li>
          <li class="list-group-item"><strong>Soluționare online a litigiilor (SOL):</strong> Poți depune o cerere la platforma ODR a Comisiei Europene: <a href="https://ec.europa.eu/consumers/odr/" target="_blank">https://ec.europa.eu/consumers/odr/</a>.</li>
        </ul>
      </div>
    </section>

    <!-- Pagina Calendar -->
    <section id="calendar" class="page">
      <div class="section-container">
        <h2>Calendar Creștin Ortodox – Aprilie</h2>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>Ziua</th>
              <th>Sărbătoare</th>
            </tr>
          </thead>
          <tbody>
            <!-- Exemplu de formatare: 
                 - Sfinții români: text în albastru;
                 - Sărbătorile mari și duminicile: text în roșu;
                 - Restul: text implicit (negru) -->
            <tr>
              <td>1</td>
              <td>M <span style="color: black;">Sf. Cuv. Maria Egipteanca; Sf. Cuv. Macarie Mărt.; Sf. Mc. Gherontie; Sf. Varsanufie de la Optina (Post)</span></td>
            </tr>
            <!-- ... celelalte zile ... -->
            <tr>
              <td>30</td>
              <td>M <span style="color: black;">Sf. Ap. Iacob al lui Zevedeu, fratele Sf. Ap. și Ev. Ioan; Sf. Ier. Donat, ep. Evriei (Dezlegare la pește)</span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Pagina Coș -->
    <section id="cos" class="page">
      <div class="section-container text-start">
        <h2>Coșul de Cumpărături</h2>
        <div id="cart-container"></div>
        <div class="mt-3">
          <button class="btn btn-danger" onclick="clearCart()">Clear Cart</button>
        </div>
        <div id="order-form" style="display:none;" class="mt-4">
          <h4>Date pentru comandă</h4>
          <div class="mb-3">
            <label>Nume:</label>
            <input type="text" id="customer-name" class="form-control" required>
          </div>
          <div class="mb-3">
            <label>Contact (Email/Telefon):</label>
            <input type="text" id="customer-contact" class="form-control" required>
          </div>
          <div class="mb-3">
            <label>Cod Reducere (opțional):</label>
            <input type="text" id="discount-code" class="form-control" placeholder="Ex: DISC10">
          </div>
          <div id="final-total-display" class="mb-3"></div>
          <button class="btn btn-success" onclick="placeOrder()">Plasează Comanda</button>
          <p class="text-muted small mt-2">Factura va fi generată de administrator, care va introduce data și ora comenzii.</p>
        </div>
      </div>
    </section>

    <!-- Pagina Admin -->
    <section id="admin" class="page">
      <div class="section-container">
        <h2>Admin</h2>
        <div id="admin-content"></div>
      </div>
    </section>
  </main>

  <!-- Buton Back to Top -->
  <button id="backToTop" onclick="scrollToTop()">&#8679;</button>

  <!-- FOOTER -->
  <footer>
    <div class="d-flex justify-content-between align-items-center flex-wrap">
      <div>
        &copy; <span id="year"></span> Magazin Bisericesc. Toate drepturile rezervate.<br>
        <small>Vânzător: SC Magazin Bisericesc SRL, Strada Exemplu nr. 1, București<br>
        Tel: 0123.456.789 | Email: contact@magazinbisericesc.ro</small>
      </div>
      <div>
        <!-- Pictograme SAL & SOL -->
        <img src="sal-icon.png" alt="SAL" title="Soluționare Alternativă a Litigiilor" class="me-2" height="40">
        <img src="sol-icon.png" alt="SOL" title="Soluționare Online a Litigiilor" height="40">
      </div>
      <div>
        <img src="anpc.jpg" alt="Logo ANPC" height="50">
      </div>
    </div>
  </footer>

  <!-- Formular pentru trimiterea emailului cu FormSubmit -->
  <form id="notifyForm" action="https://formsubmit.co/irimia.teodor.17@gmail.com" method="POST" style="display: none;">
    <input type="hidden" name="_next" value="https://jmecheria.github.io/Magazin-bisericesc/">
    <input type="hidden" name="subject" value="Notificare Comandă - Magazin Bisericesc">
    <input type="hidden" name="orderDetails" id="orderDetailsInput">
    <input type="hidden" name="_captcha" value="false">
  </form>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    /* Funcție de navigare: ascunde toate paginile și afișează pagina selectată */
    function navigateTo(pageId) {
      document.querySelectorAll('.page').forEach(function(page) {
        page.style.display = "none";
        page.classList.remove("active-page");
      });
      const target = document.getElementById(pageId);
      if (target) {
        target.style.display = "block";
        target.classList.add("active-page");
      }
      if (pageId === 'admin') { loadAdmin(); }
      if (pageId === 'produse') { renderProducts(); }
      if (pageId === 'home') { renderSlider(); }
    }

    // Buton Back to Top
    window.onscroll = function() {
      const btn = document.getElementById("backToTop");
      btn.style.display = (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) ? "block" : "none";
    };
    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Setează anul în footer
    document.getElementById('year').textContent = new Date().getFullYear();

    // Timer până la Paști
    function startTimer() {
      const easterDate = new Date("2025-04-20T00:00:00").getTime();
      const timerElem = document.getElementById("timer");
      setInterval(() => {
        const now = new Date().getTime();
        const distance = easterDate - now;
        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);
        timerElem.textContent = (distance > 0)
          ? "Timp până la Paști: " + days + "z " + hours + "h " + minutes + "m " + seconds + "s"
          : "Hristos a înviat! Sărbătoarea învierii să fie cu voi toți!";
      }, 1000);
    }
    startTimer();

    // Generează un cod alfanumeric unic de 8 caractere pentru comandă
    function generateOrderCode() {
      const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
      let code = "";
      for (let i = 0; i < 8; i++) {
        code += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      return code;
    }

    // Funcție pentru a calcula prețul final (TVA 19% + adaos 30%)
    function retailPrice(netPrice) {
      return parseFloat((netPrice * 1.30 * 1.19).toFixed(2));
    }

    // Lista de produse (netPrice = preț de achiziție fără TVA și adaos)
    const products = [
      { id: 1, name: "Candelă mare TIP IV", netPrice: 19.99, image: "1.jpg", description: "Lumânare din ceară naturală cu durată de 7 zile.", stock: 50, labels: ["Popular"], features: ["TVA: 19%", "Adaos comercial: 30%", "Material: Ceară 100% naturală", "Durată: aprox. 7 zile", "Greutate: 500g"] },
      { id: 2, name: "Candelă mare TIP III", netPrice: 12.99, image: "2.jpg", description: "Lumânare din ceară naturală cu durată de 100h.", stock: 40, labels: ["Recomandat"], features: ["TVA: 19%", "Adaos comercial: 30%", "Material: Ceară 100% naturală", "Durată: aprox. 100h", "Greutate: 400g"] },
      { id: 3, name: "Candelă mare TIP II", netPrice: 9.99, image: "3.jpg", description: "Lumânare din ceară naturală cu durată de 60h.", stock: 30, labels: ["Best Seller"], features: ["TVA: 19%", "Adaos comercial: 30%", "Material: Ceară 100% naturală", "Durată: aprox. 60h", "Greutate: 300g"] },
      { id: 4, name: "Candelă mare TIP I", netPrice: 6.99, image: "4.jpg", description: "Lumânare din ceară naturală cu durată de 16h.", stock: 60, labels: ["Pentru zile negre"], features: ["TVA: 19%", "Adaos comercial: 30%", "Material: Ceară 100% naturală", "Durată: aprox. 16h", "Greutate: 200g"] },
      { id: 5, name: "Tămâie de Oașă", netPrice: 63.99, image: "5.jpg", description: "Tămâie de înaltă calitate. 200g.", stock: 80, labels: ["Bună pentru uz zilnic"], features: ["TVA: 19%", "Adaos comercial: 30%", "Origine: Oaș", "Gramaj: 200g", "Utilizare: Aromaterapie și ritualuri"] },
      { id: 6, name: "Tămâie de Vatopedu", netPrice: 68.99, image: "6.jpg", description: "Tămâie de înaltă calitate. 200g.", stock: 70, labels: ["Premium"], features: ["TVA: 19%", "Adaos comercial: 30%", "Origine: Vatopedu", "Gramaj: 200g", "Utilizare: Aromaterapie și ritualuri"] },
      { id: 7, name: "Tămâie de Pângărați", netPrice: 23.99, image: "7.jpg", description: "Tămâie de înaltă calitate. 50g.", stock: 35, labels: ["Cantitate mai mică"], features: ["TVA: 19%", "Adaos comercial: 30%", "Origine: Pângărați", "Gramaj: 50g", "Utilizare: Aromaterapie și ritualuri"] },
      { id: 8, name: "Acatiste și Viețile sfinților", netPrice: 9.99, image: "8.jpg", description: "Acatiste & Vieți ale sfinților (format 11×16 cm).", stock: 45, labels: ["Nou"], features: ["TVA: 19%", "Adaos comercial: 30%", "Format: 11×16 cm", "Număr pagini: 320", "Tip copertă: Broșată"] },
      { id: 9, name: "Psaltire", netPrice: 29.99, image: "9.jpg", description: "Psaltire (format 14.5×20 cm).", stock: 55, labels: ["Recomandat"], features: ["TVA: 19%", "Adaos comercial: 30%", "Format: 14.5×20 cm", "Număr pagini: 560", "Tip copertă: Hardcover"] },
      { id: 10, name: "Ceaslov", netPrice: 44.99, image: "10.jpg", description: "Ceaslov (format A4).", stock: 50, labels: ["Recomandat"], features: ["TVA: 19%", "Adaos comercial: 30%", "Format: A4", "Număr pagini: 800", "Tip copertă: Hardcover"] },
      { id: 11, name: "Lumânare Înviere", netPrice: 44.99, image: "11.jpg", description: "Lumânare modernă pentru slujba de Înviere.", stock: 60, labels: ["Nou"], features: ["TVA: 19%", "Adaos comercial: 30%", "Design: Modern", "Înălțime: 50 cm", "Gramaj: 1 kg"] },
      { id: 12, name: "Icoană TIP I", netPrice: 25.99, image: "12.jpg", description: "Icoană pentru rugăciuni (format A4).", stock: 40, labels: ["Pentru zile negre"], features: ["TVA: 19%", "Adaos comercial: 30%", "Format: A4", "Material: Lemn cu ramă", "Țară origine: România"] },
      { id: 13, name: "Icoană TIP II", netPrice: 22.99, image: "13.jpg", description: "Icoană pentru rugăciuni (format A5).", stock: 30, labels: ["Recomandat"], features: ["TVA: 19%", "Adaos comercial: 30%", "Format: A5", "Material: Lemn cu ramă", "Țară origine: România"] },
      { id: 14, name: "Icoană TIP III", netPrice: 19.99, image: "14.jpg", description: "Icoană pentru rugăciuni (24×10 cm).", stock: 45, labels: ["Special"], features: ["TVA: 19%", "Adaos comercial: 30%", "Dimensiuni: 24×10 cm", "Material: Lemn cu ramă", "Țară origine: România"] },
      { id: 15, name: "Icoană TIP IV", netPrice: 139.99, image: "15.jpg", description: "Icoană pentru rugăciuni (format A4).", stock: 20, labels: ["Limited Edition"], features: ["TVA: 19%", "Adaos comercial: 30%", "Format: A4", "Material: Lemn cu ramă aurită", "Țară origine: Grecia"] },
      { id: 16, name: "Cruciuliță", netPrice: 12.99, image: "16.jpg", description: "Cruciuliță protector (dimensiuni 5×3 cm).", stock: 100, labels: ["Special"], features: ["TVA: 19%", "Adaos comercial: 30%", "Dimensiuni: 5×3 cm", "Material: Argint 925", "Țară origine: Polonia"] },
      { id: 17, name: "Cruce Binecuvântare", netPrice: 149.99, image: "17.jpg", description: "Cruce pentru slujbe (30×13 cm).", stock: 25, labels: ["Limited Edition"], features: ["TVA: 19%", "Adaos comercial: 30%", "Dimensiuni: 30×13 cm", "Material: Argint placat cu aur", "Țară origine: Grecia"] },
      { id: 18, name: "Mir de Oașă", netPrice: 9.99, image: "18.jpg", description: "Mir de familie (30 ml).", stock: 30, labels: ["Pentru zile negre"], features: ["TVA: 19%", "Adaos comercial: 30%", "Volum: 30 ml", "Ingrediente: Ulei de măsline, mirodenii", "Origine: Oaș"] },
      { id: 19, name: "Pomelnice Anuale", netPrice: 99.99, image: "19.jpg", description: "Pomelnice personalizabile 20×15 cm.", stock: 15, labels: ["Special"], features: ["TVA: 19%", "Adaos comercial: 30%", "Tip: Albume personalizabile", "Gramaj: 300g pagină", "Format: 20×15 cm"] },
      { id: 20, name: "Biblia", netPrice: 149.99, image: "20.jpg", description: "Biblia (format 21×15 cm).", stock: 40, labels: ["Recomandat"], features: ["TVA: 19%", "Adaos comercial: 30%", "Format: 21×15 cm", "Număr pagini: 1200", "Tip copertă: Hardcover"] }
    ];

    // Preluăm coșul din localStorage (dacă există)
    let cart = JSON.parse(localStorage.getItem('cartStorage') || '[]');
    updateCartCount();

    // Salvează coșul în localStorage
    function saveCart() {
      localStorage.setItem('cartStorage', JSON.stringify(cart));
    }

    // Listarea produselor pe pagina "Produse"
    function renderProducts() {
      const container = document.getElementById('products-container');
      container.innerHTML = "";
      const filterValue = document.getElementById('filter-input').value.toLowerCase();
      products.forEach(prod => {
        if (prod.name.toLowerCase().includes(filterValue)) {
          // Calculează prețul final (TVA+ADAOS)
          let prețFinal = retailPrice(prod.netPrice);
          const col = document.createElement('div');
          col.className = "col-12 col-sm-6 col-md-4 mb-4";
          col.innerHTML = `
            <div class="card product-card shadow-sm">
              <img src="${prod.image}" class="card-img-top" alt="${prod.name}" onclick="viewProduct(${prod.id})">
              <div class="card-body">
                <h5 class="card-title">${prod.name}</h5>
                <p class="price-range">${prețFinal.toFixed(2)} Lei <small>(TVA &amp; adaos incl.)</small></p>
                <div class="d-flex justify-content-between">
                  <button class="btn btn-sm btn-success" onclick="quickAddToCart(${prod.id}); event.stopPropagation();">
                    <i class="bi bi-cart-plus"></i> Adaugă
                  </button>
                  <button class="btn btn-sm btn-outline-primary" onclick="viewProduct(${prod.id}); event.stopPropagation();">
                    Detalii
                  </button>
                </div>
              </div>
            </div>`;
          container.appendChild(col);
        }
      });
    }

    // Adaugă rapid produs în coș (din lista de produse)
    function quickAddToCart(id) {
      const prod = products.find(p => p.id === id);
      if (!prod) return;
      if (prod.stock < 1) {
        alert("Stoc epuizat!");
        return;
      }
      prod.stock -= 1;
      let prețFinal = retailPrice(prod.netPrice);
      let index = cart.findIndex(item => item.id === id);
      if (index > -1) {
        cart[index].units += 1;
        cart[index].cost = prețFinal * cart[index].units;
      } else {
        cart.push({ id: id, units: 1, cost: prețFinal });
      }
      saveCart();
      updateCartCount();
      alert(`Produsul "${prod.name}" a fost adăugat în coș.`);
    }

    // Afișarea detaliilor produsului (pagina "produs")
    function viewProduct(id) {
      const prod = products.find(p => p.id === id);
      if (!prod) return;
      const container = document.getElementById('produs-container');
      let labelsHtml = "";
      if (prod.labels && prod.labels.length) {
        labelsHtml = prod.labels.map(l => `<span class="badge bg-info text-dark me-1">${l}</span>`).join("");
      }
      let featuresList = prod.features.map(f => `<li class="list-group-item">${f}</li>`).join("");
      let prețFinal = retailPrice(prod.netPrice);
      let detailsHtml = `
        <div class="quantity-controls mb-3">
          <button class="btn btn-sm btn-outline-danger" onclick="changeQuantity('dec', ${prod.id})">-</button>
          <input type="number" id="unit-${prod.id}" value="1" min="1" class="form-control d-inline-block text-center" style="width:60px;">
          <button class="btn btn-sm btn-outline-success" onclick="changeQuantity('inc', ${prod.id})">+</button>
        </div>`;
      let stockText = prod.stock + " buc";
      container.innerHTML = `
        <div class="row gx-4">
          <div class="col-md-6 mb-3">
            <img src="${prod.image}" alt="${prod.name}" class="img-fluid border rounded">
          </div>
          <div class="col-md-6 modal-details">
            <h2>${prod.name} ${labelsHtml}</h2>
            <p><strong>Preț:</strong> <span class="text-danger">${prețFinal.toFixed(2)} Lei</span> <small>(TVA &amp; adaos incl.)</small></p>
            <p><strong>Stoc:</strong> ${stockText}</p>
            ${detailsHtml}
            <button class="btn btn-danger add-cart-btn" onclick="addToCart(${prod.id})">
              <i class="bi bi-cart-plus"></i> Adaugă în Coș
            </button>
            <hr class="my-4">

            <!-- Bloc „Detalii firmă” stilizat -->
            <div class="company-details-card">
              <h5>Informații firmă</h5>
              <ul class="company-details-list">
                <li>
                  <i class="bi bi-building"></i>
                  <strong>Vânzător:</strong> SC Magazin Bisericesc SRL
                </li>
                <li>
                  <i class="bi bi-telephone"></i>
                  <strong>Contact:</strong> 0123.456.789 / contact@magazinbisericesc.ro
                </li>
                <li>
                  <i class="bi bi-shield-check"></i>
                  <strong>Garanție:</strong> 24 luni de la data achiziției
                </li>
                <li>
                  <i class="bi bi-arrow-repeat"></i>
                  <strong>Returnare:</strong> 14 zile (cost suportat de client)
                </li>
                <li>
                  <i class="bi bi-file-earmark-text"></i>
                  <strong>Termeni &amp; Condiții:</strong> <a href="#termeni">Detalii complete</a>
                </li>
              </ul>
            </div>
            <!-- Sfârșit bloc stilizat detalii firmă -->

          </div>
        </div>`;
      navigateTo('produs');
    }

    // Schimbă cantitatea din detaliile produsului
    function changeQuantity(action, id) {
      const input = document.getElementById(`unit-${id}`);
      let current = parseInt(input.value) || 1;
      if (action === 'inc') {
        input.value = current + 1;
      } else if (action === 'dec' && current > 1) {
        input.value = current - 1;
      }
    }

    // Adaugă produsul în coș (din pagina detaliu)
    function addToCart(id) {
      const prod = products.find(p => p.id === id);
      let units = parseInt(document.getElementById(`unit-${id}`).value) || 1;
      if (prod.stock < units) {
        alert("Nu există suficient stoc!");
        return;
      }
      prod.stock -= units;
      let prețFinal = retailPrice(prod.netPrice);
      let index = cart.findIndex(item => item.id === id);
      if (index > -1) {
        cart[index].units += units;
        cart[index].cost = prețFinal * cart[index].units;
      } else {
        cart.push({ id: id, units: units, cost: prețFinal * units });
      }
      saveCart();
      updateCartCount();
      alert(`Produsul "${prod.name}" a fost adăugat în coș.`);
    }

    function updateCartCount() {
      let totalItems = cart.reduce((sum, item) => sum + item.units, 0);
      document.getElementById('cart-count').textContent = totalItems;
      renderCart();
      updateFinalTotal();
    }

    function renderCart() {
      const container = document.getElementById('cart-container');
      if (cart.length === 0) {
        container.innerHTML = "<p>Coșul este gol.</p>";
        document.getElementById('order-form').style.display = "none";
        return;
      }
      let html = `<table class="table">
                    <thead>
                      <tr>
                        <th>Produs</th>
                        <th>Unități</th>
                        <th>Cost</th>
                        <th>Acțiune</th>
                      </tr>
                    </thead>
                    <tbody>`;
      let totalCost = 0;
      cart.forEach((item, index) => {
        const prod = products.find(p => p.id === item.id);
        totalCost += item.cost;
        html += `<tr>
                   <td>${prod.name}</td>
                   <td>
                     <div class="quantity-controls">
                       <button class="btn btn-sm btn-outline-danger" onclick="updateCartQuantity(${index}, 'dec')">-</button>
                       <span class="mx-1">${item.units}</span>
                       <button class="btn btn-sm btn-outline-success" onclick="updateCartQuantity(${index}, 'inc')">+</button>
                     </div>
                   </td>
                   <td>${item.cost.toFixed(2)} Lei</td>
                   <td><button class="btn btn-warning btn-sm" onclick="removeFromCart(${index})">Șterge</button></td>
                 </tr>`;
      });
      html += `<tr>
                 <td colspan="2" class="text-end"><strong>Total Inițial:</strong></td>
                 <td colspan="2"><strong>${totalCost.toFixed(2)} Lei</strong></td>
               </tr>`;
      html += `</tbody></table>`;
      container.innerHTML = html;
      document.getElementById('order-form').style.display = "block";
    }

    // Actualizează cantitatea în coș
    function updateCartQuantity(index, action) {
      const item = cart[index];
      const prod = products.find(p => p.id === item.id);
      if (action === 'inc' && prod.stock > 0) {
        item.units += 1;
        prod.stock -= 1;
      } else if (action === 'dec' && item.units > 1) {
        item.units -= 1;
        prod.stock += 1;
      }
      let prețFinal = retailPrice(prod.netPrice);
      item.cost = prețFinal * item.units;
      saveCart();
      updateCartCount();
      renderProducts();
    }

    function removeFromCart(index) {
      const removed = cart.splice(index, 1)[0];
      const prod = products.find(p => p.id === removed.id);
      prod.stock += removed.units;
      saveCart();
      updateCartCount();
    }

    function clearCart() {
      cart.forEach(item => {
        const prod = products.find(p => p.id === item.id);
        prod.stock += item.units;
      });
      cart = [];
      saveCart();
      updateCartCount();
      renderProducts();
    }

    function updateFinalTotal() {
      let orderTotal = cart.reduce((sum, item) => sum + item.cost, 0);
      let discountCode = document.getElementById("discount-code").value.trim().toUpperCase();
      let discountPercent = 0;
      if (discountCode === "DISC10") discountPercent = 10;
      else if (discountCode === "DISC20") discountPercent = 20;
      let discountAmount = orderTotal * (discountPercent / 100);
      let finalTotal = orderTotal - discountAmount;
      document.getElementById("final-total-display").innerText = "Total Final: " + finalTotal.toFixed(2) + " Lei";
    }

    document.getElementById("discount-code").addEventListener("input", updateFinalTotal);

    function placeOrder() {
      const name = document.getElementById('customer-name').value.trim();
      const contact = document.getElementById('customer-contact').value.trim();
      if (name === "" || contact === "") {
        alert("Completează datele de contact!");
        return;
      }
      if (cart.length === 0) {
        alert("Coșul este gol!");
        return;
      }
      let orderTotal = cart.reduce((sum, item) => sum + item.cost, 0);
      let discountCode = document.getElementById("discount-code").value.trim().toUpperCase();
      let discountPercent = 0;
      if (discountCode === "DISC10") discountPercent = 10;
      else if (discountCode === "DISC20") discountPercent = 20;
      let discountAmount = orderTotal * (discountPercent / 100);
      let finalTotal = orderTotal - discountAmount;
      let code = generateOrderCode();

      // Creăm comanda, incluzând codul unic
      let order = {
        id: Date.now(),
        code: code,                       // cod unic
        customer: { name, contact },
        items: [...cart],
        orderTotal: orderTotal.toFixed(2),
        discountCode: discountCode,
        discountPercent: discountPercent,
        discountAmount: discountAmount.toFixed(2),
        finalTotal: finalTotal.toFixed(2),
        dateTime: ""   // rămâne gol: va fi completat de admin
      };

      // Construim sumarul comenzii pentru email (FormSubmit)
      let orderSummary = `Cod Comandă: ${order.code}\n`;
      orderSummary += `Client: ${order.customer.name}\nContact: ${order.customer.contact}\n\n`;
      orderSummary += `Detalii Produse:\n`;
      order.items.forEach(item => {
        const prod = products.find(p => p.id === item.id);
        orderSummary += `- ${prod.name}: ${item.units} buc x ${retailPrice(prod.netPrice).toFixed(2)} Lei = ${(retailPrice(prod.netPrice) * item.units).toFixed(2)} Lei\n`;
      });
      orderSummary += `\nTotal Inițial: ${order.orderTotal} Lei\n`;
      if (discountPercent > 0) {
        orderSummary += `Cod Reducere: ${order.discountCode} (${order.discountPercent}%)\nValoare Reducere: ${order.discountAmount} Lei\n`;
      }
      orderSummary += `Total Final: ${order.finalTotal} Lei\n\n`;
      orderSummary += `Termeni de plată: Transfer bancar sau card online\nTermeni de livrare: 1–3 zile lucrătoare prin curier\nPolitica de returnare: Returnare în 14 zile (cost suportat de client)\nGaranție: 24 luni de la data achiziției\n`;

      document.getElementById("orderDetailsInput").value = orderSummary;
      document.getElementById("notifyForm").submit();
      alert(`Comanda a fost trimisă cu codul ${order.code}. Administratorul va procesa comanda și va genera factura.`);

      let ordersLocal = JSON.parse(localStorage.getItem("globalOrders") || "[]");
      ordersLocal.push(order);
      localStorage.setItem("globalOrders", JSON.stringify(ordersLocal));

      cart = [];
      saveCart();
      updateCartCount();
      document.getElementById('customer-name').value = "";
      document.getElementById('customer-contact').value = "";
      document.getElementById('discount-code').value = "";
      updateFinalTotal();
      renderProducts();
      navigateTo('home');
    }

    // Slider pentru pagina de start
    function renderSlider() {
      const sliderTrack = document.getElementById("slider-track");
      if (!sliderTrack) return;
      sliderTrack.innerHTML = "";
      // Dublăm imaginile pentru looping mai fluid
      const imgs = products.slice(0, 5).map(prod => prod.image);
      const combined = imgs.concat(imgs);
      combined.forEach(src => {
        const img = document.createElement("img");
        img.src = src;
        img.alt = "Promoție";
        sliderTrack.appendChild(img);
      });
    }

    document.addEventListener("DOMContentLoaded", function() {
      navigateTo('home');
      renderProducts();
      renderSlider();
    });

    /* Secțiunea Admin */
    let adminLogged = false;
    function loadAdmin() {
      const adminDiv = document.getElementById('admin-content');
      if (!adminLogged) {
        adminDiv.innerHTML = `
          <div class="section-container text-start">
            <h2>Login Admin</h2>
            <div class="mb-3">
              <label>Utilizator:</label>
              <input type="text" id="admin-user" class="form-control">
            </div>
            <div class="mb-3">
              <label>Parolă:</label>
              <input type="password" id="admin-pass" class="form-control">
            </div>
            <button class="btn btn-primary" onclick="adminLogin()">Login</button>
          </div>`;
      } else {
        adminDiv.innerHTML = `
          <div class="section-container">
            <h2>Dashboard Admin</h2>
            <div class="mb-3">
              <button class="btn btn-secondary" onclick="updateAllStocks()">Actualizează Stocurile</button>
            </div>
            <h5>Filtrare Produse</h5>
            <input type="text" id="admin-filter" class="form-control mb-3" placeholder="Caută produs în admin..." onkeyup="renderAdminProducts()">
            <div id="admin-products-container" class="mb-4"></div>

            <h5>Caută Comandă după Cod</h5>
            <div class="input-group mb-3">
              <input type="text" id="admin-search-code" class="form-control" placeholder="Introduceți Cod comanda">
              <button class="btn btn-primary" onclick="filterOrdersByCode()">Caută</button>
              <button class="btn btn-outline-secondary" onclick="renderAdminOrders()">Afișează Toate</button>
            </div>

            <h5>Comenzi Plasate</h5>
            <table class="table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Cod</th>
                  <th>Client</th>
                  <th>Contact</th>
                  <th>Total Final</th>
                  <th>Data (setată de admin)</th>
                  <th>Acțiuni</th>
                </tr>
              </thead>
              <tbody id="admin-orders-container"></tbody>
            </table>
            <button class="btn btn-secondary" onclick="adminLogout()">Logout</button>
          </div>`;
        renderAdminProducts();
        renderAdminOrders();
      }
    }

    function adminLogin() {
      const user = document.getElementById('admin-user').value.trim();
      const pass = document.getElementById('admin-pass').value.trim();
      if (user === "admin" && pass === "parola123") {
        adminLogged = true;
        loadAdmin();
      } else {
        alert("Autentificare eșuată!");
      }
    }

    function adminLogout() {
      adminLogged = false;
      loadAdmin();
    }

    function updateAllStocks() {
      products.forEach(prod => {
        const input = document.getElementById(`new-stock-${prod.id}`);
        if (input) {
          const newVal = parseInt(input.value);
          if (!isNaN(newVal) && newVal >= 0) {
            prod.stock = newVal;
          }
        }
      });
      alert("Stocurile au fost actualizate.");
      renderProducts();
      renderAdminProducts();
    }

    function renderAdminProducts() {
      const container = document.getElementById('admin-products-container');
      container.innerHTML = "";
      const filter = document.getElementById('admin-filter').value.toLowerCase();
      products.forEach(prod => {
        if (prod.name.toLowerCase().includes(filter)) {
          let stockHtml = `<strong>Stoc actual:</strong> ${prod.stock} buc<br>
                           <input type="number" id="new-stock-${prod.id}" placeholder="Nou stoc" style="width:80px; margin-top:3px;">`;
          const prodHTML = `
            <div class="mb-2 p-2" style="border:1px solid #ccc; border-radius:5px;">
              <strong>${prod.name}</strong><br>
              ${stockHtml}
            </div>`;
          container.innerHTML += prodHTML;
        }
      });
    }

    function renderAdminOrders(filteredOrders) {
      let orders = filteredOrders || JSON.parse(localStorage.getItem("globalOrders") || "[]");
      const tbody = document.getElementById('admin-orders-container');
      tbody.innerHTML = "";
      if (orders.length === 0) {
        tbody.innerHTML = `<tr><td colspan="7"><p>Nu există comenzi.</p></td></tr>`;
        return;
      }
      orders.forEach((order, idx) => {
        let dateDisplay = order.dateTime 
          ? `<span>${order.dateTime}</span>` 
          : `<input type="text" id="order-date-${order.id}" placeholder="DD-MM-YYYY HH:mm" style="width:140px;">`;
        let setDateBtn = order.dateTime
          ? ``
          : `<button class="btn btn-sm btn-info ms-1" onclick="setOrderDate(${idx}, ${order.id})">Salvează</button>`;
        let row = `
          <tr>
            <td>${order.id}</td>
            <td>${order.code}</td>
            <td>${order.customer.name}</td>
            <td>${order.customer.contact}</td>
            <td>${order.finalTotal} Lei</td>
            <td>${dateDisplay}</td>
            <td>
              ${setDateBtn}
              <button class="btn btn-success btn-sm ms-1" onclick="finishOrder(${idx})">Terminată</button>
              <button class="btn btn-secondary btn-sm ms-1" onclick="genInvoice(${idx})">Generează Factură</button>
            </td>
          </tr>`;
        tbody.innerHTML += row;
      });
    }

    function filterOrdersByCode() {
      const codeInput = document.getElementById("admin-search-code").value.trim().toUpperCase();
      const orders = JSON.parse(localStorage.getItem("globalOrders") || "[]");
      const filtered = orders.filter(o => o.code === codeInput);
      renderAdminOrders(filtered);
    }

    function setOrderDate(index, orderId) {
      const input = document.getElementById(`order-date-${orderId}`);
      const customDate = input.value.trim();
      if (!customDate) {
        alert("Introdu o dată valabilă (format: DD-MM-YYYY HH:mm)");
        return;
      }
      let orders = JSON.parse(localStorage.getItem("globalOrders") || "[]");
      orders[index].dateTime = customDate;
      localStorage.setItem("globalOrders", JSON.stringify(orders));
      alert(`Data comenzii #${orders[index].id} a fost setată la: ${customDate}`);
      renderAdminOrders();
    }

    function finishOrder(index) {
      let orders = JSON.parse(localStorage.getItem("globalOrders") || "[]");
      if (index >= 0 && index < orders.length) {
        orders.splice(index, 1);
        localStorage.setItem("globalOrders", JSON.stringify(orders));
        alert("Comanda a fost marcată ca finalizată.");
        renderAdminOrders();
      }
    }

    function genInvoice(index) {
      let orders = JSON.parse(localStorage.getItem("globalOrders") || "[]");
      if (orders.length <= index) return;
      const order = orders[index];
      if (!order.dateTime) {
        alert("Trebuie să setezi mai întâi data comenzii!");
        return;
      }
      let invoiceWindow = window.open("", "InvoiceWindow", "width=800,height=600");
      let itemsRows = order.items.map(item => {
        const prod = products.find(p => p.id === item.id);
        let unitPrice = retailPrice(prod.netPrice);
        return `<tr>
                  <td>${prod.name}</td>
                  <td>${item.units}</td>
                  <td>${(unitPrice * item.units).toFixed(2)} Lei</td>
                </tr>`;
      }).join("");
      let htmlContent = `
        <html>
        <head>
          <title>Factura - Comanda ${order.id}</title>
          <style>
            body { font-family: "Times New Roman", Times, serif; padding: 20px; background-color: #fff; }
            .invoice { max-width: 800px; margin: 0 auto; padding: 20px; border: 1px solid #000; }
            .invoice-header { text-align: center; margin-bottom: 20px; }
            .invoice-header img { height: 70px; margin-bottom: 10px; }
            .invoice-details { margin-bottom: 20px; text-align: left; }
            .invoice-details p { margin: 0 0 5px; }
            table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
            table, th, td { border: 1px solid #000; }
            th, td { padding: 8px; text-align: center; }
            .text-end { text-align: right; }
            .text-start { text-align: left; }
          </style>
        </head>
        <body>
          <div class="invoice">
            <div class="invoice-header">
              <img src="logo.jpg" alt="Logo Magazin Bisericesc">
              <h2>Factura Nr. ${order.id}</h2>
              <p>Data și ora: ${order.dateTime}</p>
            </div>
            <div class="invoice-details">
              <p><strong>Vânzător:</strong> SC Magazin Bisericesc SRL</p>
              <p><strong>Adresă:</strong> Strada Exemplu nr. 1, București</p>
              <p><strong>Tel/Email:</strong> 0123.456.789 / contact@magazinbisericesc.ro</p>
              <hr>
              <p><strong>Client:</strong> ${order.customer.name}</p>
              <p><strong>Contact:</strong> ${order.customer.contact}</p>
            </div>
            <table>
              <thead>
                <tr>
                  <th>Produs</th>
                  <th>Unități</th>
                  <th>Cost</th>
                </tr>
              </thead>
              <tbody>
                ${itemsRows}
              </tbody>
            </table>
            <div class="text-end mb-3">
              <p><strong>Total Inițial:</strong> ${order.orderTotal} Lei</p>
              ${order.discountPercent > 0 ? `<p><strong>Reducere (${order.discountCode}):</strong> -${order.discountAmount} Lei</p>` : ""}
              <p><strong>Total de plată:</strong> ${order.finalTotal} Lei</p>
            </div>
            <div class="text-start">
              <p><strong>Termeni de plată:</strong> Transfer bancar sau card online</p>
              <p><strong>Termeni de livrare:</strong> 1–3 zile lucrătoare prin curier</p>
              <p><strong>Politica de returnare:</strong> Returnare în 14 zile (cost suportat de client)</p>
              <p><strong>Garanție:</strong> 24 luni de la data achiziției</p>
            </div>
          </div>
        </body>
        </html>`;
      invoiceWindow.document.write(htmlContent);
      invoiceWindow.document.close();
      invoiceWindow.focus();
      invoiceWindow.print();
    }
  </script>
</body>
</html>
