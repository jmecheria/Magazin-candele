<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Magazin Bisericesc</title>
  <!-- Bootstrap pentru stilizÄƒri rapide -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    /* HEADER È™i FOOTER cu gradient de roÈ™u Ã®nchis */
    header, footer {
      background: linear-gradient(135deg, #4a0000, #a30000);
      color: #fff;
      padding: 10px 20px;
    }
    header img.logo {
      height: 50px;
    }
    nav ul {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
    }
    nav ul li a {
      color: #fff;
      font-weight: bold;
      text-decoration: none;
      cursor: pointer;
    }
    .cart-icon {
      position: relative;
      display: inline-block;
      cursor: pointer;
    }
    .cart-icon img {
      height: 24px;
    }
    .cart-icon .badge {
      position: absolute;
      top: -5px;
      right: -10px;
      background: yellow;
      color: #000;
      border-radius: 50%;
      padding: 2px 6px;
      font-size: 0.8rem;
    }
    /* Container principal: fundal alb, margini, umbrÄƒ È™i colÈ›uri rotunjite */
    .main-container {
      background-color: #fff;
      margin: 20px auto;
      padding: 20px;
      max-width: 1200px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    /* Fiecare secÈ›iune are o linie roÈ™ie subÈ›ire ca delimitare */
    section {
      border-top: 3px solid #a30000;
      padding-top: 20px;
      margin-top: 20px;
    }
    /* SecÈ›iuni de paginÄƒ â€“ ascunse iniÈ›ial */
    .page { display: none; }
    .active-page { display: block; }
    /* Carduri pentru produse â€“ uniformizare È™i efect la hover */
    .product-card {
      border: 1px solid #ccc;
      border-radius: 5px;
      overflow: hidden;
      background-color: #f8f9fa;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .product-card:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .product-card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      cursor: pointer;
    }
    .product-card .card-body {
      padding: 15px;
      flex-grow: 1;
    }
    /* Stil pentru input-ul de filtrare a produselor */
    #filter-input {
      max-width: 400px;
      margin-bottom: 20px;
    }
    footer { text-align: center; }
    /* Slider de produse pe pagina de start */
    .slider-container {
      overflow: hidden;
      position: relative;
      height: 150px;
      margin-top: 20px;
      opacity: 0.6;
    }
    .slider-track {
      display: flex;
      width: max-content;
      animation: slide 20s linear infinite;
    }
    .slider-track img {
      margin-right: 10px;
      height: 150px;
      width: auto;
      border-radius: 5px;
    }
    @keyframes slide {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }
    /* Responsive */
    @media (max-width: 768px) {
      nav ul {
        justify-content: center;
      }
      .main-container {
        margin: 10px;
        padding: 15px;
      }
      .product-card img {
        height: 150px;
      }
    }
    /* Stil pentru factura Ã®n fereastra de printare */
    .invoice {
      max-width: 800px;
      margin: 20px auto;
      padding: 20px;
      font-family: Arial, sans-serif;
    }
    .invoice h2, .invoice p, .invoice table {
      margin: 0 0 10px;
      padding: 0;
    }
    .invoice table {
      width: 100%;
      border-collapse: collapse;
    }
    .invoice table, .invoice table th, .invoice table td {
      border: 1px solid #000;
    }
    .invoice table th, .invoice table td {
      padding: 5px;
      text-align: left;
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="d-flex justify-content-between align-items-center flex-wrap">
    <div class="d-flex align-items-center">
      <img src="https://via.placeholder.com/150x50?text=Logo" alt="Logo" class="logo me-2">
      <span class="fs-4">Magazin Bisericesc</span>
    </div>
    <nav>
      <ul>
        <li><a onclick="navigateTo('home')">AcasÄƒ</a></li>
        <li><a onclick="navigateTo('produse')">Produse</a></li>
        <li><a onclick="navigateTo('despre')">Despre noi</a></li>
        <li><a onclick="navigateTo('termeni')">Termeni & CondiÈ›ii</a></li>
        <li><a onclick="navigateTo('calendar')">Calendar</a></li>
        <li><a onclick="navigateTo('cos')">CoÈ™</a></li>
        <li><a onclick="navigateTo('admin')">Admin</a></li>
      </ul>
    </nav>
    <div class="cart-icon" onclick="navigateTo('cos')">
      <img src="https://via.placeholder.com/24?text=ðŸ›’" alt="CoÈ™">
      <span class="badge" id="cart-count">0</span>
    </div>
  </header>
  
  <!-- Timer dinamic pÃ¢nÄƒ la PaÈ™ti -->
  <div class="text-center py-2" style="background-color:#fff;">
    <span id="timer" class="fs-5 text-danger"></span>
  </div>
  
  <!-- CONTINUT PRINCIPAL ÃŽNCADRAT -->
  <main class="main-container" id="content">
    <!-- Pagina de start -->
    <section id="home" class="page active-page">
      <div class="text-center py-5">
        <h1>Bine aÈ›i venit la Magazinul Bisericesc</h1>
        <p>DescoperÄƒ produsele noastre pentru momente de spiritualitate!</p>
        <button class="btn btn-dark" onclick="navigateTo('produse')">Vezi produsele</button>
        <!-- Slider cu imagini de produse -->
        <div class="slider-container">
          <div class="slider-track" id="slider-track">
            <!-- Imaginile se genereazÄƒ Ã®n JS -->
          </div>
        </div>
      </div>
    </section>
    
    <!-- Pagina Produse -->
    <section id="produse" class="page">
      <h2 class="mb-4">Produsele noastre</h2>
      <!-- Filtru de cÄƒutare -->
      <input type="text" id="filter-input" class="form-control" placeholder="CautÄƒ produs..." onkeyup="filterProducts()">
      <div id="products-container" class="row">
        <!-- Cardurile produselor se genereazÄƒ Ã®n JS -->
      </div>
    </section>
    
    <!-- Pagina Detalii Produs -->
    <section id="produs" class="page">
      <div id="produs-container">
        <!-- Detalii despre produsul selectat -->
      </div>
      <div class="text-center mt-3">
        <button class="btn btn-secondary" onclick="navigateTo('produse')">ÃŽnapoi la Produse</button>
      </div>
    </section>
    
    <!-- Pagina Despre noi (aproximativ 150 de cuvinte) -->
    <section id="despre" class="page">
      <h2>Despre noi</h2>
      <p>
        Magazinul nostru Bisericesc a fost fondat din dorinÈ›a de a oferi clienÈ›ilor produse autentice, care reflectÄƒ tradiÈ›iile È™i valorile spirituale. Ne mÃ¢ndrim cu atenÈ›ia la detalii È™i cu serviciile dedicate, lucrÃ¢nd neÃ®ncetat pentru a asigura calitatea fiecÄƒrui obiect. Fiecare produs este ales cu grijÄƒ, pentru a aduce liniÈ™te È™i inspiraÈ›ie Ã®n viaÈ›a credincioÈ™ilor. Suntem dedicaÈ›i promovÄƒrii culturii religioase È™i pÄƒstrÄƒrii tradiÈ›iilor, combinÃ¢nd inovaÈ›ia cu respectul pentru moÈ™tenirea spiritualÄƒ. VÄƒ invitÄƒm sÄƒ exploraÈ›i colecÈ›ia noastrÄƒ variatÄƒ È™i sÄƒ descoperiÈ›i povestea fiecÄƒrui obiect Ã®n parte.
      </p>
    </section>
    
    <!-- Pagina Termeni È™i CondiÈ›ii (aproximativ 150 de cuvinte) -->
    <section id="termeni" class="page">
      <h2>Termeni È™i CondiÈ›ii</h2>
      <p>
        VÄƒ rugÄƒm sÄƒ citiÈ›i cu atenÈ›ie aceÈ™ti termeni È™i condiÈ›ii Ã®nainte de a utiliza acest magazin online. AccesÃ¢nd site-ul, vÄƒ asumaÈ›i responsabilitatea de a respecta toate regulile prezentate aici. Ne rezervÄƒm dreptul de a modifica condiÈ›iile Ã®n orice moment, iar utilizarea continuÄƒ a platformei Ã®nseamnÄƒ acceptarea modificÄƒrilor. InformaÈ›iile colectate sunt folosite exclusiv pentru procesarea comenzilor È™i Ã®mbunÄƒtÄƒÈ›irea experienÈ›ei clienÈ›ilor. Orice reclamaÈ›ie sau neÃ®nÈ›elegere va fi soluÈ›ionatÄƒ de echipa noastrÄƒ de suport, care este disponibilÄƒ pentru clarificÄƒri. VÄƒ mulÈ›umim cÄƒ alegeÈ›i sÄƒ faceÈ›i parte din comunitatea noastrÄƒ.
      </p>
    </section>
    
    <!-- Pagina Calendar (exemplu: luna aprilie) -->
    <section id="calendar" class="page">
      <h2>Calendar CreÈ™tin Ortodox â€“ Aprilie</h2>
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>Ziua</th>
            <th>SÄƒrbÄƒtoare</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>1</td><td>Intrarea Ã®n Post</td></tr>
          <tr><td>14</td><td>SfÃ¢ntul Vasile</td></tr>
          <tr><td>30</td><td>-</td></tr>
        </tbody>
      </table>
    </section>
    
    <!-- Pagina CoÈ™ -->
    <section id="cos" class="page">
      <h2>CoÈ™ul de CumpÄƒrÄƒturi</h2>
      <div id="cart-container">
        <!-- Lista produselor din coÈ™ se genereazÄƒ Ã®n JS -->
      </div>
      <div id="order-form" style="display:none;" class="mt-4">
        <h4>Date pentru comandÄƒ</h4>
        <div class="mb-3">
          <label>Nume:</label>
          <input type="text" id="customer-name" class="form-control">
        </div>
        <div class="mb-3">
          <label>Contact (Email/Telefon):</label>
          <input type="text" id="customer-contact" class="form-control">
        </div>
        <button class="btn btn-success" onclick="placeOrder()">FinalizeazÄƒ Comanda</button>
      </div>
    </section>
    
    <!-- Pagina Admin -->
    <section id="admin" class="page">
      <h2>Admin</h2>
      <div id="admin-content">
        <!-- ConÈ›inutul de login sau dashboard se actualizeazÄƒ dinamic -->
      </div>
    </section>
  </main>
  
  <!-- FOOTER -->
  <footer>
    <p>&copy; <span id="year"></span> Magazin Bisericesc. Toate drepturile rezervate.</p>
    <img src="https://via.placeholder.com/100x30?text=ANPC" alt="Logo ANPC">
  </footer>
  
  <!-- JAVASCRIPT -->
  <script>
    // Navigarea Ã®ntre secÈ›iuni
    function navigateTo(pageId) {
      document.querySelectorAll('.page').forEach(page => page.classList.remove('active-page'));
      document.getElementById(pageId).classList.add('active-page');
      if (pageId === 'admin') loadAdmin();
    }
    
    // Anul curent Ã®n footer
    document.getElementById('year').textContent = new Date().getFullYear();
    
    // Timer dinamic pÃ¢nÄƒ la PaÈ™ti (ex: 20 aprilie 2025)
    function startTimer() {
      let easterDate = new Date("2025-04-20T00:00:00").getTime();
      let timerElem = document.getElementById("timer");
      let interval = setInterval(() => {
        let now = new Date().getTime();
        let distance = easterDate - now;
        let days = Math.floor(distance / (1000 * 60 * 60 * 24));
        let hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        let minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        let seconds = Math.floor((distance % (1000 * 60)) / 1000);
        if (distance > 0) {
          timerElem.textContent = "Timp pÃ¢nÄƒ la PaÈ™ti: " + days + "z " + hours + "h " + minutes + "m " + seconds + "s";
        } else {
          timerElem.textContent = "SÄƒrbÄƒtoarea a Ã®nceput! UrmÄƒtoarea se anunÈ›Äƒ Ã®n curÃ¢nd.";
          clearInterval(interval);
        }
      }, 1000);
    }
    startTimer();
    
    /* ---- Produse È™i Stocuri ---- */
    const products = [
      {id: 1, name: "LumÃ¢nare RoÈ™ie", price: 10.00, image: "https://via.placeholder.com/400x200?text=Produs+1", description: "LumÃ¢nare din cearÄƒ naturalÄƒ pentru rugÄƒciune.", stock: 50, defaultStock: 50},
      {id: 2, name: "LumÃ¢nare AlbÄƒ", price: 9.50, image: "https://via.placeholder.com/400x200?text=Produs+2", description: "LumÃ¢nare tradiÈ›ionalÄƒ pentru bisericÄƒ.", stock: 40, defaultStock: 40},
      {id: 3, name: "IcoanÄƒ SfÃ¢ntÄƒ", price: 25.50, image: "https://via.placeholder.com/400x200?text=Produs+3", description: "IcoanÄƒ lucratÄƒ manual.", stock: 30, defaultStock: 30},
      {id: 4, name: "Carte de RugÄƒciuni", price: 15.75, image: "https://via.placeholder.com/400x200?text=Produs+4", description: "Carte cu rugÄƒciuni È™i imnuri.", stock: 60, defaultStock: 60},
      {id: 5, name: "TÄƒmÃ¢ie", price: 8.00, image: "https://via.placeholder.com/400x200?text=Produs+5", description: "TÄƒmÃ¢ie de Ã®naltÄƒ calitate.", stock: 80, defaultStock: 80},
      {id: 6, name: "Candele Decorative", price: 12.50, image: "https://via.placeholder.com/400x200?text=Produs+6", description: "Candele cu design elegant.", stock: 70, defaultStock: 70},
      {id: 7, name: "Cruce MicÄƒ", price: 18.00, image: "https://via.placeholder.com/400x200?text=Produs+7", description: "Cruce din lemn sculptat.", stock: 35, defaultStock: 35},
      {id: 8, name: "AmuletÄƒ", price: 7.50, image: "https://via.placeholder.com/400x200?text=Produs+8", description: "AmuletÄƒ de protecÈ›ie.", stock: 45, defaultStock: 45},
      {id: 9, name: "Set RugÄƒciuni", price: 20.00, image: "https://via.placeholder.com/400x200?text=Produs+9", description: "Set complet de rugÄƒciuni.", stock: 55, defaultStock: 55},
      {id: 10, name: "Simbol Bisericesc", price: 11.00, image: "https://via.placeholder.com/400x200?text=Produs+10", description: "Simbol al credinÈ›ei.", stock: 50, defaultStock: 50},
      {id: 11, name: "LumÃ¢nare DecorativÄƒ", price: 13.00, image: "https://via.placeholder.com/400x200?text=Produs+11", description: "LumÃ¢nare cu design modern.", stock: 60, defaultStock: 60},
      {id: 12, name: "IcoanÄƒ MicÄƒ", price: 16.00, image: "https://via.placeholder.com/400x200?text=Produs+12", description: "IcoanÄƒ personalÄƒ pentru rugÄƒciuni.", stock: 40, defaultStock: 40},
      {id: 13, name: "Carte de SfinÈ›i", price: 14.25, image: "https://via.placeholder.com/400x200?text=Produs+13", description: "Carte cu vieÈ›i de sfinÈ›i.", stock: 30, defaultStock: 30},
      {id: 14, name: "Candele Aromatice", price: 9.75, image: "https://via.placeholder.com/400x200?text=Produs+14", description: "Candele cu arome plÄƒcute.", stock: 45, defaultStock: 45},
      {id: 15, name: "Tablou Icoanic", price: 30.00, image: "https://via.placeholder.com/400x200?text=Produs+15", description: "Tablou religios elegant.", stock: 20, defaultStock: 20},
      {id: 16, name: "Breloc cu Cruce", price: 5.50, image: "https://via.placeholder.com/400x200?text=Produs+16", description: "Breloc simbolic.", stock: 100, defaultStock: 100},
      {id: 17, name: "Iconar Decorative", price: 22.00, image: "https://via.placeholder.com/400x200?text=Produs+17", description: "Set de iconar pentru casÄƒ.", stock: 25, defaultStock: 25},
      {id: 18, name: "VazÄƒ cu Cruce", price: 17.50, image: "https://via.placeholder.com/400x200?text=Produs+18", description: "VazÄƒ decorativÄƒ cu motive religioase.", stock: 30, defaultStock: 30},
      {id: 19, name: "Candelabru", price: 26.00, image: "https://via.placeholder.com/400x200?text=Produs+19", description: "Candelabru pentru slujbe.", stock: 15, defaultStock: 15},
      {id: 20, name: "Set de RugÄƒciune", price: 19.00, image: "https://via.placeholder.com/400x200?text=Produs+20", description: "Set complet cu accesorii de rugÄƒciune.", stock: 40, defaultStock: 40}
    ];
    
    // CoÈ™ul de cumpÄƒrÄƒturi (Ã®n memorie)
    let cart = [];
    // Comenzile â€“ pentru globalitate, reÈ›ine cÄƒ localStorage este doar local;
    // Pentru o soluÈ›ie globalÄƒ, este necesar un backend real.
    let orders = JSON.parse(localStorage.getItem("globalOrders") || "[]");
    
    // Sliderul de produse din pagina de start
    function renderSlider() {
      const track = document.getElementById("slider-track");
      track.innerHTML = "";
      products.forEach(prod => {
        const img = document.createElement("img");
        img.src = prod.image;
        img.alt = prod.name;
        track.appendChild(img);
      });
    }
    
    // RenderizeazÄƒ cardurile de produse Ã®n pagina "produse"
    function renderProducts() {
      const container = document.getElementById('products-container');
      container.innerHTML = "";
      const filterValue = document.getElementById('filter-input').value.toLowerCase();
      products.forEach(prod => {
        if (prod.name.toLowerCase().includes(filterValue)) {
          const col = document.createElement('div');
          col.className = "col-md-4 mb-4";
          col.innerHTML = `
            <div class="product-card h-100">
              <img src="${prod.image}" alt="${prod.name}" onclick="viewProduct(${prod.id})">
              <div class="card-body">
                <h5>${prod.name}</h5>
                <p>PreÈ›: ${prod.price.toFixed(2)} Lei</p>
                <p>Stoc: <span id="stock-${prod.id}">${prod.stock}</span></p>
              </div>
              <div class="p-2">
                <div class="input-group" style="max-width:120px;">
                  <input type="number" id="qty-${prod.id}" value="1" min="1" class="form-control">
                  <button class="btn btn-danger btn-sm" onclick="addToCart(${prod.id}, 'list')">AdaugÄƒ</button>
                </div>
              </div>
            </div>
          `;
          container.appendChild(col);
        }
      });
    }
    
    // FiltreazÄƒ produsele Ã®n funcÈ›ie de input
    function filterProducts() {
      renderProducts();
    }
    
    // AfiÈ™eazÄƒ detaliile unui produs
    function viewProduct(id) {
      const prod = products.find(p => p.id === id);
      if (!prod) return;
      const container = document.getElementById('produs-container');
      container.innerHTML = `
        <div class="row">
          <div class="col-md-6">
            <img src="${prod.image}" alt="${prod.name}" class="img-fluid">
          </div>
          <div class="col-md-6">
            <h2>${prod.name}</h2>
            <p>${prod.description}</p>
            <p><strong>PreÈ›:</strong> ${prod.price.toFixed(2)} Lei</p>
            <p><strong>Stoc disponibil:</strong> <span id="detail-stock-${prod.id}">${prod.stock}</span></p>
            <div class="input-group" style="max-width:120px;">
              <input type="number" id="detail-qty-${prod.id}" value="1" min="1" class="form-control">
              <button class="btn btn-danger" onclick="addToCart(${prod.id}, 'detail')">AdaugÄƒ</button>
            </div>
          </div>
        </div>
      `;
      navigateTo('produs');
    }
    
    // AdaugÄƒ produsul Ã®n coÈ™ È™i actualizeazÄƒ stocul
    function addToCart(id, source = 'list') {
      const qtyInput = (source === 'list') ? document.getElementById(`qty-${id}`) : document.getElementById(`detail-qty-${id}`);
      let qty = parseInt(qtyInput.value) || 1;
      const prod = products.find(p => p.id === id);
      if (prod.stock < qty) {
        alert("Nu existÄƒ suficient stoc!");
        return;
      }
      prod.stock -= qty;
      document.getElementById(`stock-${id}`) && (document.getElementById(`stock-${id}`).textContent = prod.stock);
      document.getElementById(`detail-stock-${id}`) && (document.getElementById(`detail-stock-${id}`).textContent = prod.stock);
      let index = cart.findIndex(item => item.id === id);
      if (index > -1) {
        cart[index].quantity += qty;
      } else {
        cart.push({ id: id, quantity: qty });
      }
      updateCartCount();
      alert(`Produsul "${prod.name}" a fost adÄƒugat Ã®n coÈ™.`);
    }
    
    // ActualizeazÄƒ afiÈ™area coÈ™ului
    function updateCartCount() {
      let total = cart.reduce((sum, item) => sum + item.quantity, 0);
      document.getElementById('cart-count').textContent = total;
      renderCart();
    }
    
    // RenderizeazÄƒ lista de produse din coÈ™
    function renderCart() {
      const container = document.getElementById('cart-container');
      if (cart.length === 0) {
        container.innerHTML = "<p>CoÈ™ul este gol.</p>";
        document.getElementById('order-form').style.display = "none";
        return;
      }
      let html = `<table class="table">
                    <thead>
                      <tr>
                        <th>Produs</th>
                        <th>Cantitate</th>
                        <th>PreÈ›</th>
                        <th>Total</th>
                        <th>AcÈ›iune</th>
                      </tr>
                    </thead>
                    <tbody>`;
      let grandTotal = 0;
      cart.forEach((item, index) => {
        let prod = products.find(p => p.id === item.id);
        let total = prod.price * item.quantity;
        grandTotal += total;
        html += `<tr>
                   <td>${prod.name}</td>
                   <td>${item.quantity}</td>
                   <td>${prod.price.toFixed(2)}</td>
                   <td>${total.toFixed(2)}</td>
                   <td><button class="btn btn-warning btn-sm" onclick="removeFromCart(${index})">È˜terge</button></td>
                 </tr>`;
      });
      html += `<tr>
                 <td colspan="3" class="text-end"><strong>Total General:</strong></td>
                 <td colspan="2"><strong>${grandTotal.toFixed(2)} Lei</strong></td>
               </tr>`;
      html += `</tbody></table>`;
      container.innerHTML = html;
      document.getElementById('order-form').style.display = "block";
    }
    
    // EliminÄƒ un produs din coÈ™ È™i recupereazÄƒ stocul
    function removeFromCart(index) {
      const removed = cart.splice(index, 1)[0];
      const prod = products.find(p => p.id === removed.id);
      prod.stock += removed.quantity;
      document.getElementById(`stock-${prod.id}`) && (document.getElementById(`stock-${prod.id}`).textContent = prod.stock);
      document.getElementById(`detail-stock-${prod.id}`) && (document.getElementById(`detail-stock-${prod.id}`).textContent = prod.stock);
      updateCartCount();
    }
    
    // PlaseazÄƒ comanda È™i salveazÄƒ Ã®n localStorage; pentru global orders este necesar un backend real
    function placeOrder() {
      const name = document.getElementById('customer-name').value.trim();
      const contact = document.getElementById('customer-contact').value.trim();
      if (name === "" || contact === "") {
        alert("CompleteazÄƒ datele de contact!");
        return;
      }
      if (cart.length === 0) {
        alert("CoÈ™ul este gol!");
        return;
      }
      let orderTotal = cart.reduce((sum, item) => {
        const prod = products.find(p => p.id === item.id);
        return sum + (prod.price * item.quantity);
      }, 0);
      let order = {
        id: Date.now(),
        customer: { name, contact },
        items: [...cart],
        total: orderTotal
      };
      orders.push(order);
      localStorage.setItem("globalOrders", JSON.stringify(orders));
      cart = [];
      updateCartCount();
      document.getElementById('customer-name').value = "";
      document.getElementById('customer-contact').value = "";
      alert("Comanda a fost plasatÄƒ. MulÈ›umim, " + name + "!");
      navigateTo('home');
    }
    
    /* ---- FuncÈ›ionalitÄƒÈ›i pentru Admin ---- */
    let adminLogged = false;
    
    function loadAdmin() {
      const adminDiv = document.getElementById('admin-content');
      if (!adminLogged) {
        adminDiv.innerHTML = `
          <h4>Login Admin</h4>
          <div class="mb-3">
            <label>Utilizator:</label>
            <input type="text" id="admin-user" class="form-control">
          </div>
          <div class="mb-3">
            <label>ParolÄƒ:</label>
            <input type="password" id="admin-pass" class="form-control">
          </div>
          <button class="btn btn-primary" onclick="adminLogin()">Login</button>
        `;
      } else {
        adminDiv.innerHTML = `
          <h4>Dashboard Admin</h4>
          <button class="btn btn-secondary mb-3" onclick="resetStock()">Reset Stocuri (toate produsele)</button>
          <h5>Filtrare Produse</h5>
          <input type="text" id="admin-filter" class="form-control mb-3" placeholder="CautÄƒ produs Ã®n admin..." onkeyup="renderAdminProducts()">
          <div id="admin-products-container" class="mb-4"></div>
          <h5>Comenzi Plasate</h5>
          <div id="admin-orders-container"></div>
          <button class="btn btn-secondary mt-3" onclick="adminLogout()">Logout</button>
        `;
        renderAdminProducts();
        renderOrders();
      }
    }
    
    function adminLogin() {
      const user = document.getElementById('admin-user').value.trim();
      const pass = document.getElementById('admin-pass').value.trim();
      if (user === "admin" && pass === "parola123") {
        adminLogged = true;
        loadAdmin();
      } else {
        alert("Autentificare eÈ™uatÄƒ!");
      }
    }
    
    function adminLogout() {
      adminLogged = false;
      loadAdmin();
    }
    
    // RenderizeazÄƒ produsele Ã®n secÈ›iunea Admin cu opÈ›iunea de a seta un nou stoc
    function renderAdminProducts() {
      const container = document.getElementById('admin-products-container');
      container.innerHTML = "";
      const filter = document.getElementById('admin-filter').value.toLowerCase();
      products.forEach(prod => {
        if (prod.name.toLowerCase().includes(filter)) {
          const prodHTML = `
            <div class="mb-2 p-2" style="border:1px solid #ccc; border-radius:5px;">
              <strong>${prod.name}</strong> - Stoc: <span id="admin-stock-${prod.id}">${prod.stock}</span>
              <input type="number" id="new-stock-${prod.id}" placeholder="Nou stoc" style="width:70px; margin-left:10px;">
              <button class="btn btn-warning btn-sm ms-2" onclick="updateProductStockCustom(${prod.id})">SeteazÄƒ stoc</button>
            </div>
          `;
          container.innerHTML += prodHTML;
        }
      });
    }
    
    // ActualizeazÄƒ stocul pentru un produs Ã®n funcÈ›ie de valoarea introdusÄƒ Ã®n admin
    function updateProductStockCustom(id) {
      const newStock = parseInt(document.getElementById(`new-stock-${id}`).value) || 0;
      const prod = products.find(p => p.id === id);
      prod.stock = newStock;
      document.getElementById(`admin-stock-${id}`).textContent = prod.stock;
      document.getElementById(`stock-${id}`) && (document.getElementById(`stock-${id}`).textContent = prod.stock);
      document.getElementById(`detail-stock-${id}`) && (document.getElementById(`detail-stock-${id}`).textContent = prod.stock);
      alert("Stocul pentru " + prod.name + " a fost actualizat la " + newStock + ".");
    }
    
    // Reset global â€“ setÄƒm stocurile la valorile implicite
    function resetStock() {
      products.forEach(prod => {
        prod.stock = prod.defaultStock;
        document.getElementById(`stock-${prod.id}`) && (document.getElementById(`stock-${prod.id}`).textContent = prod.stock);
        document.getElementById(`detail-stock-${prod.id}`) && (document.getElementById(`detail-stock-${prod.id}`).textContent = prod.stock);
        document.getElementById(`admin-stock-${prod.id}`) && (document.getElementById(`admin-stock-${prod.id}`).textContent = prod.stock);
      });
      alert("Stocurile au fost resetate la valorile implicite.");
    }
    
    // RenderizeazÄƒ comenzile Ã®n secÈ›iunea Admin; OBSERVAÈšIE: Pentru comenzi globale este necesar un backend
    function renderOrders() {
      const container = document.getElementById('admin-orders-container');
      orders = JSON.parse(localStorage.getItem("globalOrders") || "[]");
      if (orders.length === 0) {
        container.innerHTML = "<p>Nu existÄƒ comenzi.</p>";
        return;
      }
      let html = `<table class="table">
                    <thead>
                      <tr>
                        <th>ID ComandÄƒ</th>
                        <th>Client</th>
                        <th>Detalii Produse</th>
                        <th>Total</th>
                        <th>AcÈ›iuni</th>
                      </tr>
                    </thead>
                    <tbody>`;
      orders.forEach((order, idx) => {
        let details = "";
        order.items.forEach(item => {
          const prod = products.find(p => p.id === item.id);
          details += prod.name + " x " + item.quantity + "<br>";
        });
        html += `<tr>
                   <td>${order.id}</td>
                   <td>${order.customer.name}<br>${order.customer.contact}</td>
                   <td>${details}</td>
                   <td>${order.total.toFixed(2)} Lei</td>
                   <td>
                     <button class="btn btn-success btn-sm" onclick="finishOrder(${idx})">TerminatÄƒ</button>
                     <button class="btn btn-info btn-sm" onclick="printInvoice(${idx})">TipÄƒreÈ™te Factura</button>
                   </td>
                 </tr>`;
      });
      html += `</tbody></table>`;
      container.innerHTML = html;
    }
    
    // MarcheazÄƒ o comandÄƒ ca terminatÄƒ È™i actualizeazÄƒ localStorage
    function finishOrder(index) {
      orders.splice(index, 1);
      localStorage.setItem("globalOrders", JSON.stringify(orders));
      renderOrders();
    }
    
    // TipÄƒreÈ™te factura pentru comanda selectatÄƒ: deschide o fereastrÄƒ nouÄƒ cu facturÄƒ formattatÄƒ
    function printInvoice(index) {
      const order = orders[index];
      let invoiceWindow = window.open("", "PrintInvoice", "width=800,height=600");
      let htmlContent = `
        <html>
        <head>
          <title>Factura - Comanda ${order.id}</title>
          <style>
            body { font-family: Arial, sans-serif; padding: 20px; }
            h2, p, table { margin-bottom: 10px; }
            table { width: 100%; border-collapse: collapse; }
            table, th, td { border: 1px solid #000; }
            th, td { padding: 5px; text-align: left; }
          </style>
        </head>
        <body>
          <h2>Factura - Comanda ${order.id}</h2>
          <p><strong>Client:</strong> ${order.customer.name}</p>
          <p><strong>Contact:</strong> ${order.customer.contact}</p>
          <table>
            <thead>
              <tr>
                <th>Produs</th>
                <th>Cantitate</th>
                <th>PreÈ›</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody>`;
      order.items.forEach(item => {
        const prod = products.find(p => p.id === item.id);
        const total = prod.price * item.quantity;
        htmlContent += `<tr>
                          <td>${prod.name}</td>
                          <td>${item.quantity}</td>
                          <td>${prod.price.toFixed(2)}</td>
                          <td>${total.toFixed(2)}</td>
                        </tr>`;
      });
      htmlContent += `</tbody>
          </table>
          <p><strong>Total ComandÄƒ:</strong> ${order.total.toFixed(2)} Lei</p>
        </body>
        </html>`;
      invoiceWindow.document.write(htmlContent);
      invoiceWindow.document.close();
      invoiceWindow.focus();
      invoiceWindow.print();
    }
    
    // La Ã®ncÄƒrcarea paginii
    document.addEventListener("DOMContentLoaded", function() {
      renderProducts();
      updateCartCount();
      renderSlider();
    });
  </script>
  <!-- Bootstrap Bundle JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
