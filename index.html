<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Magazin Bisericesc</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    /* Stilizare generală pentru secțiuni */
    .section-container {
      border: 1px solid #a30000;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 20px;
      background-color: #fff;
      text-align: center;
    }
    .text-start { text-align: left !important; }
    table.table {
      border: 1px solid #a30000;
      border-collapse: collapse;
      width: 100%;
    }
    table.table th, table.table td {
      border: 1px solid #a30000 !important;
      padding: 8px;
      text-align: left;
    }
    header, footer {
      background: linear-gradient(135deg, #500000, #a30000);
      color: #fff;
      padding: 10px 20px;
    }
    header img.logo, footer img { height: 50px; }
    nav ul {
      list-style: none;
      margin: 0;
      padding: 0;
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      justify-content: center;
    }
    nav ul li a {
      color: #fff;
      font-weight: bold;
      text-decoration: none;
      cursor: pointer;
    }
    .cart-icon {
      position: relative;
      display: inline-block;
      cursor: pointer;
    }
    .cart-icon img { height: 24px; }
    .cart-icon .badge {
      position: absolute;
      top: -5px;
      right: -10px;
      background: yellow;
      color: #000;
      border-radius: 50%;
      padding: 2px 6px;
      font-size: 0.8rem;
    }
    .main-container {
      background-color: #fff;
      margin: 20px auto;
      padding: 20px;
      max-width: 1200px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .section-container h2 {
      border-bottom: 2px solid #a30000;
      color: #a30000;
      padding-bottom: 5px;
      margin-bottom: 10px;
      text-align: center;
    }
    /* Paginile vor fi gestionate prin display, iar clasa "active-page" indică pagina vizibilă */
    .page { display: none; }
    .page.active-page { display: block; }
    /* Carduri de produs în lista de produse: se afișează doar imaginea, numele și prețul (sau intervalul de preț) */
    .product-card {
      border: 1px solid #ccc;
      border-radius: 5px;
      overflow: hidden;
      background-color: #f8f9fa;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      text-align: center;
      height: 100%;
    }
    .product-card:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .product-card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      cursor: pointer;
    }
    .product-card .card-body { padding: 15px; }
    .price-range { font-weight: bold; color: #a30000; }
    /* Stil pentru modalul de detalii al produsului */
    .modal-details { text-align: left; }
    .quantity-select, .unit-input {
      border: 1px solid #a30000;
      border-radius: 4px;
      height: 38px;
      padding: 4px;
    }
    .unit-input { width: 80px; text-align: center; margin-left: 5px; }
    .add-cart-btn {
      border: 1px solid #a30000;
      background-color: #a30000;
      color: #fff;
      border-radius: 0 4px 4px 0;
      height: 38px;
      font-weight: bold;
      width: 100%;
    }
    .add-cart-btn:hover { background-color: #7a0000; }
    #filter-input { max-width: 400px; margin: 0 auto 20px; }
    footer { text-align: center; }
    /* Slider pentru pagina de start */
    .slider-container {
      overflow: hidden;
      position: relative;
      height: 150px;
      margin-top: 20px;
      opacity: 0.6;
    }
    .slider-track {
      display: flex;
      width: max-content;
      animation: slide 20s linear infinite;
    }
    .slider-track img {
      width: 250px;
      height: 150px;
      object-fit: cover;
      margin-right: 10px;
      border-radius: 5px;
    }
    @keyframes slide {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }
    .attractive-text {
      font-size: 1.1rem;
      line-height: 1.6;
      color: #333;
      text-align: center;
    }
    button { transition: transform 0.1s ease, background-color 0.2s ease; }
    button:active { transform: scale(0.98); }
    #backToTop {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 100;
      background: #a30000;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 1.5rem;
      display: none;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    #backToTop:hover { background: #7a0000; }
    .invoice {
      max-width: 800px;
      margin: 20px auto;
      padding: 20px;
      font-family: "Times New Roman", Times, serif;
      text-align: center;
    }
    .invoice h2, .invoice p, .invoice table {
      margin: 0 0 10px;
      padding: 0;
      text-align: center;
    }
    .invoice table {
      width: 100%;
      border-collapse: collapse;
    }
    .invoice table, .invoice table th, .invoice table td {
      border: 1px solid #000;
    }
    .invoice table th, .invoice table td { padding: 5px; text-align: center; }
    /* Imagini din carouselul "Despre noi" – dimensiuni fixe */
    #aboutCarousel .carousel-item img {
      width: 600px;
      height: 400px;
      object-fit: cover;
      margin: 0 auto;
    }
    @media (max-width: 768px) {
      nav ul { justify-content: center; }
      .main-container { margin: 10px; padding: 15px; }
      .product-card img { height: 150px; }
    }
    /* Slider pentru imagini de ambalaje la produsele variant în modal */
    .variant-slider-container {
      overflow: hidden;
      position: relative;
      height: 100px;
      margin-top: 10px;
    }
    .variant-slider-track {
      display: flex;
      width: max-content;
      animation: slide 10s linear infinite;
    }
    .variant-slider-track img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      margin-right: 5px;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="d-flex justify-content-between align-items-center flex-wrap">
    <div class="d-flex align-items-center">
      <img src="logo.jpg" alt="Logo" class="logo me-2">
      <span class="fs-4">Magazin Bisericesc</span>
    </div>
    <nav>
      <ul>
        <li><a onclick="navigateTo('home')">Acasă</a></li>
        <li><a onclick="navigateTo('produse')">Produse</a></li>
        <li><a onclick="navigateTo('despre')">Despre noi</a></li>
        <li><a onclick="navigateTo('termeni')">Termeni & Condiții</a></li>
        <li><a onclick="navigateTo('calendar')">Calendar</a></li>
        <li><a onclick="navigateTo('admin')">Admin</a></li>
      </ul>
    </nav>
    <div class="cart-icon" onclick="navigateTo('cos')">
      <img src="cos.jpg" alt="Coș">
      <span class="badge" id="cart-count">0</span>
    </div>
  </header>

  <!-- Timer dinamic -->
  <div class="text-center py-2" style="background-color:#fff;">
    <span id="timer" class="fs-5 text-danger"></span>
  </div>

  <!-- CONȚINUT PRINCIPAL -->
  <main class="main-container" id="content">
    <!-- Pagina de start -->
    <section id="home" class="page active-page">
      <div class="section-container">
        <h2>Bine ați venit la Magazinul Bisericesc</h2>
        <div class="text-center py-3">
          <p>Descoperă produsele noastre pentru a afla liniștea sufletească!</p>
          <button class="btn btn-dark mb-3" onclick="navigateTo('produse')">Vezi produsele</button>
          <div class="slider-container">
            <div class="slider-track" id="slider-track"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Pagina Produse: Listarea produselor (se afișează doar imaginea, numele și prețul/intervalul) -->
    <section id="produse" class="page">
      <div class="section-container">
        <h2>Produsele noastre</h2>
        <input type="text" id="filter-input" class="form-control mb-3" placeholder="Caută produs..." onkeyup="renderProducts()">
        <div id="products-container" class="row"></div>
      </div>
    </section>

    <!-- Pagina Detalii Produs (Modal) -->
    <section id="produs" class="page">
      <div class="section-container">
        <div id="produs-container"></div>
        <div id="modal-controls" class="mt-3"></div>
        <div class="text-center mt-3">
          <button class="btn btn-secondary" onclick="navigateTo('produse')">Înapoi la Produse</button>
        </div>
      </div>
    </section>

    <!-- Pagina Despre noi -->
    <section id="despre" class="page">
      <div class="section-container">
        <h2>Despre noi</h2>
        <p class="attractive-text">
          Magazinul Bisericesc se remarcă prin pasiunea pentru tradiție și spiritualitate. Fondat pentru a oferi obiecte de cult de cea mai înaltă calitate, colaborăm cu meșteri locali dedicați care își pun inima în fiecare lucrare. Oferta noastră reunește atât obiecte artizanale, cât și accesorii moderne, toate selectate cu atenție pentru a oferi o experiență spirituală autentică. Ne mândrim cu transparența informațiilor tehnice despre fiecare produs, pentru ca tu să te simți în siguranță în alegerea ta.
        </p>
        <!-- Carousel pentru "Despre noi" cu imagini de dimensiuni fixe -->
        <div id="aboutCarousel" class="carousel slide mt-3" data-bs-ride="carousel" data-bs-touch="true">
          <div class="carousel-inner">
            <div class="carousel-item active">
              <img src="21.jpg" class="d-block w-100" alt="Biserica 1">
            </div>
            <div class="carousel-item">
              <img src="22.jpg" class="d-block w-100" alt="Biserica 2">
            </div>
            <div class="carousel-item">
              <img src="23.jpg" class="d-block w-100" alt="Productie 1">
            </div>
            <div class="carousel-item">
              <img src="24.jpg" alt="Productie 2">
            </div>
            <div class="carousel-item">
              <img src="25.jpg" alt="Productie 3">
            </div>
            <div class="carousel-item">
              <img src="26.jpg" alt="Productie 4">
            </div>
            <div class="carousel-item">
              <img src="27.jpg" alt="Productie 5">
            </div>
          </div>
          <button class="carousel-control-prev" type="button" data-bs-target="#aboutCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#aboutCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
      </div>
    </section>

    <!-- Pagina Termeni și Condiții -->
    <section id="termeni" class="page">
      <div class="section-container">
        <h2>Termeni și Condiții</h2>
        <p class="attractive-text">
          Accesând acest site, sunteți de acord cu toți termenii și condițiile de utilizare. Informațiile furnizate sunt destinate să asigure o experiență transparentă și sigură. Magazinul își rezervă dreptul de a modifica periodic aceste condiții, iar continuarea utilizării platformei implică acceptarea modificărilor. Datele personale sunt protejate conform normelor în vigoare, iar orice solicitare de suport este tratată cu maximă seriozitate.
        </p>
      </div>
    </section>

    <!-- Pagina Calendar -->
    <section id="calendar" class="page">
      <div class="section-container">
        <h2>Calendar Creștin Ortodox – Aprilie</h2>
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>Ziua</th>
              <th>Sărbătoare</th>
            </tr>
          </thead>
          <tbody>
           <tr><td>1</td><td>M	Sf. Cuv. Maria Egipteanca; Sf. Cuv. Macarie Mărt.; Sf. Mc. Gherontie; Sf. Varsanufie de la Optina (Post)</td></tr>
            <tr><td>2</td><td>M  Sf. Cuv. Tit, făcătorul de minuni; Sf. Mc. Amfian și Edesie (Denia Canonului cel Mare) (Post)</td></tr>
            <tr><td>3</td><td>J  Sf. Cuv. Nichita Mărt. și Ilirie (Dezlegare la ulei și vin)</td></tr>
            <tr><td>4</td><td>V  Sf. Cuv. Iosif Imnograful, Gheorghe din Maleon și Zosima (Denia Acatistului Bunei Vestiri) (Post)</td></tr>
            <tr><td>5</td><td>S  Sf. Mc. Victorin și cei împreună cu el; Sf. Mc. Teodul și Agatopod (Sâmbăta a V-a din Post - Pomenirea morților) (Dezlegare la ulei și vin)</td></tr>
            <tr><td>6</td><td>D  † Sf. Sfințit Mc. Irineu, ep. de Sirmium; Sf. Ier. Eutihie, patr. Constantinopolului; Sf. Cuv. Grigorie Sinaitul și Platonida (Dezlegare la ulei și vin)
Duminica a V-a din Post (a Sf. Cuv. Maria Egipteanca; Prevestirea Patimilor; Cererea fiilor lui Zevedeu; Pocăința femeii păcătoase); Ap. Evrei IX, 11-14; Galateni III, 23-29; Ev. Marcu X, 32-45; Luca VII, 36-50; glas 8, voscr. 8</td></tr>
            <tr><td>7</td><td>L	Sf. Mc. Caliopie; Sf. Ier. Gheorghe Mărt., ep. Mitilenei (Post)</td></tr>
            <tr><td>8</td><td>M  Sf. Ap. Irodion, Agav, Ruf, Flegon, Asincrit și Ermis; Sf. Ier. Celestin, ep. Romei (Post)</td></tr>
            <tr><td>9</td><td>M	Sf. Mc. Eupsihie din Cezareea Capadociei; Sf. Cuv. Vadim (Post)</td></tr>
            <tr><td>10</td><td>J  Sf. Mc. Terentie, Pompei, African, Maxim și Dima (Post)</td></tr>
            <tr><td>11</td><td>V  †) Sf. Ier. Calinic de la Cernica, ep. Râmnicului; Sf. Sfințit Mc. Antipa, ep. Pergamului Asiei (Dezlegare la ulei și vin)</td></tr>
            <tr><td>12</td><td>S  †) Sf. Mc. Sava de la Buzău; Sf. Ier. Vasile Mărt., ep. Pariei (Sâmbăta lui Lazăr - Pomenirea morților) (Dezlegare la ulei și vin)</td></tr>
            <tr><td>13</td><td>D	(Denia Sf. și Marii Luni) (Dezlegare la pește)
(†) Intrarea Domnului în Ierusalim (Duminica a VI-a din Post - a Floriilor); Ap. Filipeni IV, 4-9; Ev. Ioan XII, 1-18</td></tr>                                       
            <tr><td>14</td><td>L	Sf. și Marea Luni; †) Sf. Ier. Pahomie de la Gledin, ep. Romanului; Sf. Ier. Martin Mărt., ep. Romei; Sf. Mc. Tomaida (Denia Sf. și Marii Marți) (Numai seara, pâine și apă)</td></tr>
            <tr><td>15</td><td>M	Sf. și Marea Marți; Sf. Ap. Aristarh, Pud și Trofim; Sf. Mc. Crescent (Denia Sf. și Marii Miercuri) (Numai seara, pâine și apă)</td></tr>
            <tr><td>16</td><td>M	Sf. și Marea Miercuri; Sf. Mc. fecioare Agapia, Irina și Hionia (Denia Sf. și Marii Joi) (Numai seara, pâine și apă)</td></tr>
            <tr><td>17</td><td>J	Sf. și Marea Joi; Sf. Sfințit Mc. Simeon, ep. Persiei (Pomenirea morților - Denia celor 12 Evanghelii, a Sf. și Marii Vineri) (Dezlegare la ulei și vin)</td></tr>
            <tr><td>18</td><td>v  Sf. și Marea Vineri - Scoaterea Sf. Aer; Sf. Cuv. Ioan, ucenicul Sf. Grigorie Decapolitul (Denia Prohodului Domnului, a Sf. și Marii Sâmbete) (Zi aliturgică) (Post negru)</td></tr>
            <tr><td>19</td><td>S	Sf. și Marea Sâmbătă; Sf. Cuv. Ioan de la Lavra Veche; Sf. Sfințit Mc. Pafnutie (Dezlegare la ulei și vin)</td></tr>
            <tr><td>20</td><td>	D	
(†) Învierea Domnului (Sfintele Paști); Ap. Fapte I, 1-8; Ev. Ioan I, 1-17</td></tr>
            <tr><td>21</td><td>	L	(†) A doua zi de Paști (Mărturia lui Ioan Botezătorul); †) Cinstirea Sf. Ic. a M. D. „Axion Estin” de la M. Protaton - Athos; Sf. Sfințit Mc. Ianuarie, ep. de Benevent; Sf. Mc. Teodor din Perga; Sf. Mc. Alexandra, împ.</td></tr>
            <tr><td>22</td><td>	M	(†) A treia zi de Paști (Drumul spre Emaus); Sf. Ier. Teodor Sicheotul, ep. Anastasiopolei</td></tr>
            <tr><td>23</td><td>	M	†) Sf. M. Mc. Gheorghe, Purtătorul de biruință; Sf. Mc. Valerie (Harți)</td></tr>
            <tr><td>24</td><td>	J	†) Sf. Ier. Mărt. Ilie Iorest, Sava Brancovici și Simion Ștefan, mitr. Transilvaniei; Sf. Ier. Iosif Mărt. din Maramureș; Sf. Mc. Pasicrat și Valentin; Sf. Cuv. Elisabeta</td></tr>
            <tr><td>25</td><td>	V	†) Izvorul Tămăduirii; †) Cinstirea Sf. Ic. a M. D. „Siriaca” de la M. Ghighiu; Sf. Ap. și Ev. Marcu; †) Sf. Cuv. Vasile de la Poiana Mărului (Harți)</td></tr>
            <tr><td>26</td><td>	S	Sf. Sfințit Mc. Vasilevs, ep. Amasiei; Sf. Cuv. Glafira; † Sf. Mc. Chiril, Chindeu și Tasie din Axiopolis (Cernavodă)</td></tr>
            <tr><td>27</td><td>	D	Sf. Sfințit Mc. Simeon, ruda Domnului, ep. Ierusalimului
Duminica a II-a după Paști (a Sf. Ap. Toma); Ap. Fapte V, 12-20; Ev. Ioan XX, 19-31; glas 1, voscr. 1</td></tr>
            <tr><td>28</td><td>	L	Sf. Ap. Iason și Sosipatru; Sf. Mc. Maxim, Cvintilian și Dadas din Ozovia</td></tr>
            <tr><td>29</td><td>	M	Sf. 9 Mc. din Cizic; Sf. Cuv. Memnon, făcătorul de minuni</td></tr>
            <tr><td>30</td><td>	M	Sf. Ap. Iacob al lui Zevedeu, fratele Sf. Ap. și Ev. Ioan; Sf. Ier. Donat, ep. Evriei (Dezlegare la pește)</td></tr>
          </tbody>
        </table>
      </div>
    </section>

    <!-- Pagina Coș -->
    <section id="cos" class="page">
      <div class="section-container">
        <h2>Coșul de Cumpărături</h2>
        <div id="cart-container"></div>
        <div class="mt-3">
          <button class="btn btn-danger" onclick="clearCart()">Clear Cart</button>
        </div>
        <div id="order-form" style="display:none;" class="mt-4">
          <h4>Date pentru comandă</h4>
          <div class="mb-3 text-start">
            <label>Nume:</label>
            <input type="text" id="customer-name" class="form-control" required>
          </div>
          <div class="mb-3 text-start">
            <label>Contact (Email/Telefon):</label>
            <input type="text" id="customer-contact" class="form-control" required>
          </div>
          <div class="mb-3 text-start">
            <label>Cod Reducere (opțional):</label>
            <input type="text" id="discount-code" class="form-control" placeholder="Ex: DISC10">
          </div>
          <div id="final-total-display" class="mb-3"></div>
          <button class="btn btn-success" onclick="placeOrder()">Finalizează Comanda</button>
        </div>
      </div>
    </section>

    <!-- Pagina Detalii Comandă -->
    <section id="order-details" class="page">
      <div class="section-container">
        <h2>Detalii Comandă</h2>
        <div id="order-details-container"></div>
        <div class="text-center mt-3">
          <button class="btn btn-secondary" onclick="navigateTo('home')">Înapoi Acasă</button>
        </div>
      </div>
    </section>

    <!-- Pagina Admin -->
    <section id="admin" class="page">
      <div class="section-container">
        <h2>Admin</h2>
        <div id="admin-content"></div>
      </div>
    </section>
  </main>

  <!-- Buton Back to Top -->
  <button id="backToTop" onclick="scrollToTop()">&#8679;</button>

  <!-- FOOTER -->
  <footer>
    <p>&copy; <span id="year"></span> Magazin Bisericesc. Toate drepturile rezervate.</p>
    <img src="anpc.jpg" alt="Logo ANPC">
  </footer>

  <!-- Formular pentru trimiterea emailului prin FormSubmit -->
  <form id="notifyForm" action="https://formsubmit.co/irimia.teodor.17@gmail.com" method="POST" style="display: none;">
    <input type="hidden" name="_next" value="https://jmecheria.github.io/Magazin-bisericesc/">
    <input type="hidden" name="subject" value="Notificare Comandă - Magazin Bisericesc">
    <input type="hidden" name="orderDetails" id="orderDetailsInput">
    <input type="hidden" name="_captcha" value="false">
  </form>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Funcție simplificată de navigare: ascunde toate paginile și afișează doar pagina selectată
    function navigateTo(pageId) {
      document.querySelectorAll('.page').forEach(function(page) {
          page.style.display = "none";
          page.classList.remove("active-page");
      });
      var target = document.getElementById(pageId);
      target.style.display = "block";
      target.classList.add("active-page");
      if(pageId === 'admin') { loadAdmin(); }
      if(pageId === 'produse') { renderProducts(); }
    }

    // Back to Top
    window.onscroll = function() {
      const btn = document.getElementById("backToTop");
      btn.style.display = (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) ? "block" : "none";
    };
    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Setează anul în footer
    document.getElementById('year').textContent = new Date().getFullYear();

    // Timer până la Paști
    function startTimer() {
      let easterDate = new Date("2025-04-20T00:00:00").getTime();
      let timerElem = document.getElementById("timer");
      setInterval(() => {
        let now = new Date().getTime();
        let distance = easterDate - now;
        let days = Math.floor(distance / (1000 * 60 * 60 * 24));
        let hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        let minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        let seconds = Math.floor((distance % (1000 * 60)) / 1000);
        timerElem.textContent = (distance > 0)
          ? "Timp până la Paști: " + days + "z " + hours + "h " + minutes + "m " + seconds + "s"
          : "Hristos a înviat!Sărbătoarea învierii să fie cu voi!";
      }, 1000);
    }
    startTimer();

    // Exemplu de produse (extinde până la 20 după necesitate)
    const products = [
      {
        id: 1,
        type: "variant",
        name: "Candelă patriarhie diferite dimensiuni",
        image: "1.jpg",
        description: "Lumânare din ceară naturală, realizată artizanal, ideală pentru păstrarea îndelungată a luminii Sfinte.",
        labels: ["Nou", "Popular"],
        variants: [
          { weight: Tip_I, price: 8.00, stock: 10, image: "1.jpg" },
          { weight: Tip_II, price: 10.00, stock: 8,  image: "2.jpg" },
          { weight: Tip_III, price: 12.00, stock: 6,  image: "3.jpg" },
          { weight: Tip_IV, price: 20.00, stock: 4,  image: "4.jpg" },
        ]
      },
      {
        id: 2,
        type: "standard",
        name: "Acatiste și viețile Sfinților",
        image: "8.jpg",
        description: "Un ajutător în căutarea liniștii.",
        material: "Hârtie",
        dimensions: "13*20cm",
        weight: "-",
        price: 10.00,
        stock: 15,
        labels: ["Limited"]
      },
      {
        id: 3,
        type: "variant",
        name: "Tămâie diferite sortimente",
        image: "5.jpg",
        description: "Tâmaie naturală pentru un miros plăcut și pentru realizarea slujbelor",
        labels: ["Artizanal"],
        variants: [
          { weight: Tămâie_de_Oasa_10g , price: 5.00, stock: 5, image: "5.jpg" },
          { weight: Tămâie_de_Oasa_50g, price: 20.00, stock: 4, image: "6.jpg" },
          { weight: Tămâie_de_Oasa_200g, price: 65.00, stock: 3, image: "5.jpg" },
          { weight: Tămâie_de_Vatopedu_100g, price: 55.00, stock: 3, image: "7.jpg" },
          { weight: Tămâie_de_Pângărați_50g, price: 23.00, stock: 2, image: "6.jpg" }
        ]
      },
       {
        id: 4,
        type: "standard",
        name: "Ceaslov",
        image: "10.jpg",
        description: "O carte importantă pentru rugăciunile casei.",
        material: "Hârtie",
        dimensions: "16,5*23 cm",
        weight: "-",
        price: 45.00,
        stock: 15,
        labels: ["Recomandat"]
      },
       {
        id: 5,
        type: "standard",
        name: "Psaltire",
        image: "9.jpg",
        description: "Una dintre cărțile care ar trebui să le citească un creștin.",
        material: "Hârtie",
        dimensions: "14,5*20 cm",
        weight: "150g",
        price: 30.00,
        stock: 15,
        labels: ["Recomandat"]
      },
       {
        id: 6,
        type: "standard",
        name: "Lumânare înviere",
        image: "11.jpg",
        description: "Una dintre cărțile care ar trebui să le citească un creștin.",
        material: "Ceară",
        dimensions: "67 cm",
        weight: "-",
        price: 50.00,
        stock: 15,
        labels: ["Nou"]
      },
      {
        id: 7,
        type: "variant",
        name: "Icoane ",
        image: "15.jpg",
        description: "Icoane pentru o mai bună vizualizarea a Sfinților ce ne rugăm",
        labels: ["Recomandat"],
        variants: [
          { weight: Icoană_Tip I , price: 26.00, stock: 5, image: "12.jpg" },
          { weight: Icoană_Tip II , price: 22.00, stock: 4, image: "13.jpg" },
          { weight: Icoană_Tip III , price: 20.00, stock: 3, image: "14.jpg" },
          { weight: Icoană_Tip IV , price: 140.00, stock: 3, image: "15.jpg" },
        ]
      },
      // Adaugă produsele până la 20...
    ];

    let cart = [];

    // Renderizează lista de produse (pagina "Produse")
    function renderProducts() {
      const container = document.getElementById('products-container');
      container.innerHTML = "";
      const filterValue = document.getElementById('filter-input').value.toLowerCase();
      products.forEach(prod => {
        if(prod.name.toLowerCase().includes(filterValue)) {
          let infoText = "";
          if(prod.type === "variant") {
            const prices = prod.variants.map(v => v.price);
            const minPrice = Math.min(...prices).toFixed(2);
            const maxPrice = Math.max(...prices).toFixed(2);
            infoText = `<span class="price-range">de la ${minPrice} Lei până la ${maxPrice} Lei</span>`;
          } else {
            infoText = `<span class="price-range">${prod.price.toFixed(2)} Lei</span>`;
          }
          const col = document.createElement('div');
          col.className = "col-md-4 mb-4";
          col.innerHTML = `
            <div class="card product-card">
              <img src="${prod.image}" class="card-img-top" alt="${prod.name}" onclick="viewProduct(${prod.id})">
              <div class="card-body">
                <h5 class="card-title">${prod.name}<br>${infoText}</h5>
                <button class="btn btn-outline-primary" onclick="viewProduct(${prod.id})">Detalii</button>
              </div>
            </div>`;
          container.appendChild(col);
        }
      });
    }

    // Deschide modalul de detalii al produsului
    function viewProduct(id) {
      const prod = products.find(p => p.id === id);
      if(!prod) return;
      const container = document.getElementById('produs-container');
      let labelsHtml = "";
      if(prod.labels && prod.labels.length)
        labelsHtml = prod.labels.map(l => `<span class="badge bg-info text-dark me-1">${l}</span>`).join("");
      let detailsHtml = "";
      if(prod.type === "variant") {
        let variantOptions = prod.variants.map((v, idx) =>
          `<option value="${idx}">${v.weight}g - ${v.price.toFixed(2)} Lei (Stoc: ${v.stock} buc)</option>`
        ).join("");
        let variantSlider = `
          <div class="mb-3">
            <label>Ambalaje disponibile:</label>
            <div id="variantSlider-${prod.id}" class="variant-slider-container">
              <div class="variant-slider-track">
                ${prod.variants.map(v => `<img src="${v.image ? v.image : prod.image}" alt="${v.weight}g">`).join("")}
              </div>
            </div>
          </div>`;
        detailsHtml = `
          <div class="mb-3 modal-details">
            <label>Selectează varianta:</label>
            <select id="variant-${prod.id}" class="form-control quantity-select">
              ${variantOptions}
            </select>
          </div>
          ${variantSlider}
          <div class="mb-3 modal-details">
            <label>Număr de unități:</label>
            <input type="number" id="unit-${prod.id}" class="unit-input" value="1" min="1">
          </div>`;
      } else {
        detailsHtml = `
          <div class="modal-details">
            <p><strong>Material:</strong> ${prod.material}</p>
            <p><strong>Dimensiuni:</strong> ${prod.dimensions}</p>
            <p><strong>Greutate:</strong> ${prod.weight}</p>
            <p><strong>Preț per unitate:</strong> ${prod.price.toFixed(2)} Lei</p>
            <p><strong>Stoc:</strong> ${prod.stock} buc</p>
          </div>
          <div class="mb-3">
            <label>Număr de unități:</label>
            <input type="number" id="unit-${prod.id}" class="unit-input" value="1" min="1">
          </div>`;
      }
      let stockText = "";
      if(prod.type === "variant")
        stockText = prod.variants.map(v => v.weight + "g: " + v.stock + " buc").join(" / ");
      else
        stockText = prod.stock + " buc";
      container.innerHTML = `
        <div class="row">
          <div class="col-md-6">
            <img src="${prod.image}" alt="${prod.name}" class="img-fluid">
          </div>
          <div class="col-md-6 modal-details">
            <h2>${prod.name}</h2>
            <p>${prod.description}</p>
            ${labelsHtml ? `<p>${labelsHtml}</p>` : ""}
            <p><strong>Stoc disponibil:</strong> ${stockText}</p>
            ${detailsHtml}
            <button class="btn btn-danger add-cart-btn" onclick="addToCart(${prod.id}, 'detail')">Adaugă în Coș</button>
          </div>
        </div>`;
      navigateTo('produs');
    }

    // Adaugă produsul în coș
    function addToCart(id, source = 'list') {
      const prod = products.find(p => p.id === id);
      let units, variantIndex = null;
      if(prod.type === "variant") {
        variantIndex = (source === 'list') ? 0 : parseInt(document.getElementById(`variant-${id}`).value);
        units = (source === 'list') ? 1 : parseInt(document.getElementById(`unit-${id}`).value) || 1;
        let selectedVariant = prod.variants[variantIndex];
        if(selectedVariant.stock < units) {
          alert("Nu există suficient stoc pentru această variantă!");
          return;
        }
        selectedVariant.stock -= units;
      } else {
        units = (source === 'list') ? 1 : parseInt(document.getElementById(`unit-${id}`).value) || 1;
        if(prod.stock < units) {
          alert("Nu există suficient stoc!");
          return;
        }
        prod.stock -= units;
      }
      if(prod.type === "variant") {
        updateVariantStockDisplay(prod);
      } else {
        if(document.getElementById(`stock-${id}`))
          document.getElementById(`stock-${id}`).textContent = prod.stock + " buc";
        if(document.getElementById(`detail-stock-${id}`))
          document.getElementById(`detail-stock-${id}`).textContent = prod.stock + " buc";
      }
      let index = cart.findIndex(item => item.id === id && (prod.type === "variant" ? item.variantIndex === variantIndex : true));
      let price = prod.type === "variant" ? prod.variants[variantIndex].price : prod.price;
      if(index > -1) {
        cart[index].units += units;
        cart[index].cost += price * units;
      } else {
        cart.push({
          id: id,
          variantIndex: prod.type === "variant" ? variantIndex : null,
          units: units,
          cost: price * units
        });
      }
      updateCartCount();
      alert(`Produsul "${prod.name}" a fost adăugat în coș.`);
    }

    function updateCartCount() {
      let totalItems = cart.reduce((sum, item) => sum + item.units, 0);
      document.getElementById('cart-count').textContent = totalItems;
      renderCart();
      updateFinalTotal();
    }

    function renderCart() {
      const container = document.getElementById('cart-container');
      if(cart.length === 0) {
        container.innerHTML = "<p>Coșul este gol.</p>";
        document.getElementById('order-form').style.display = "none";
        return;
      }
      let html = `<table class="table">
                    <thead>
                      <tr>
                        <th>Produs</th>
                        <th>Unități</th>
                        <th>Cost</th>
                        <th>Acțiune</th>
                      </tr>
                    </thead>
                    <tbody>`;
      let totalCost = 0;
      cart.forEach((item, index) => {
        const prod = products.find(p => p.id === item.id);
        totalCost += item.cost;
        let prodInfo = prod.name;
        if(prod.type === "variant")
          prodInfo += ` (${prod.variants[item.variantIndex].weight}g)`;
        html += `<tr>
                   <td>${prodInfo}</td>
                   <td>${item.units}</td>
                   <td>${item.cost.toFixed(2)} Lei</td>
                   <td><button class="btn btn-warning btn-sm" onclick="removeFromCart(${index})">Șterge</button></td>
                 </tr>`;
      });
      html += `<tr>
                 <td colspan="2" class="text-end"><strong>Total Inițial:</strong></td>
                 <td colspan="2"><strong>${totalCost.toFixed(2)} Lei</strong></td>
               </tr>`;
      html += `</tbody></table>`;
      container.innerHTML = html;
      document.getElementById('order-form').style.display = "block";
    }

    function removeFromCart(index) {
      const removed = cart.splice(index, 1)[0];
      const prod = products.find(p => p.id === removed.id);
      if(prod.type === "variant") {
        prod.variants[removed.variantIndex].stock += removed.units;
        updateVariantStockDisplay(prod);
      } else {
        prod.stock += removed.units;
        if(document.getElementById(`stock-${prod.id}`))
          document.getElementById(`stock-${prod.id}`).textContent = prod.stock + " buc";
        if(document.getElementById(`detail-stock-${prod.id}`))
          document.getElementById(`detail-stock-${prod.id}`).textContent = prod.stock + " buc";
      }
      updateCartCount();
    }

    function clearCart() {
      cart.forEach(item => {
        const prod = products.find(p => p.id === item.id);
        if(prod.type === "variant") {
          prod.variants[item.variantIndex].stock += item.units;
          updateVariantStockDisplay(prod);
        } else {
          prod.stock += item.units;
        }
      });
      cart = [];
      updateCartCount();
      renderProducts();
    }

    function updateVariantStockDisplay(prod) {
      let stockText = prod.variants.map(v => v.weight + "g: " + v.stock + " buc").join(" / ");
      if(document.getElementById(`stock-${prod.id}`))
        document.getElementById(`stock-${prod.id}`).textContent = stockText;
      if(document.getElementById(`detail-stock-${prod.id}`))
        document.getElementById(`detail-stock-${prod.id}`).textContent = stockText;
    }

    function updateFinalTotal() {
      let orderTotal = cart.reduce((sum, item) => sum + item.cost, 0);
      let discountCode = document.getElementById("discount-code").value.trim();
      let discountPercent = 0;
      if(discountCode === "DISC10") discountPercent = 10;
      else if(discountCode === "DISC20") discountPercent = 20;
      let discountAmount = orderTotal * (discountPercent / 100);
      let finalTotal = orderTotal - discountAmount;
      document.getElementById("final-total-display").innerText = "Total Final: " + finalTotal.toFixed(2) + " Lei";
    }

    document.getElementById("discount-code").addEventListener("input", updateFinalTotal);

    function placeOrder() {
      const name = document.getElementById('customer-name').value.trim();
      const contact = document.getElementById('customer-contact').value.trim();
      if(name === "" || contact === "") {
        alert("Completează datele de contact!");
        return;
      }
      if(cart.length === 0) {
        alert("Coșul este gol!");
        return;
      }
      let orderTotal = cart.reduce((sum, item) => sum + item.cost, 0);
      let discountCode = document.getElementById("discount-code").value.trim();
      let discountPercent = 0;
      if(discountCode === "DISC10") discountPercent = 10;
      else if(discountCode === "DISC20") discountPercent = 20;
      let discountAmount = orderTotal * (discountPercent / 100);
      let finalTotal = orderTotal - discountAmount;
      
      let order = {
        id: Date.now(),
        customer: { name, contact },
        items: [...cart],
        orderTotal: orderTotal.toFixed(2),
        discountCode: discountCode,
        discountPercent: discountPercent,
        discountAmount: discountAmount.toFixed(2),
        finalTotal: finalTotal.toFixed(2)
      };
      
      let orderSummary = "ID Comandă: " + order.id + "\n";
      orderSummary += "Client: " + order.customer.name + "\n";
      orderSummary += "Contact: " + order.customer.contact + "\n\n";
      orderSummary += "Detalii Produse:\n";
      order.items.forEach(item => {
        const prod = products.find(p => p.id === item.id);
        if(prod.type === "variant") {
          orderSummary += "Produs ID: " + item.id + " - " + item.units + " unități, variantă: " + prod.variants[item.variantIndex].weight + "g\n";
        } else {
          orderSummary += "Produs ID: " + item.id + " - " + item.units + " unități\n";
        }
      });
      orderSummary += "\nTotal Inițial: " + order.orderTotal + " Lei\n";
      if(discountPercent > 0) {
        orderSummary += "Cod Reducere: " + order.discountCode + " (" + discountPercent + "%)\n";
        orderSummary += "Valoare Reducere: " + order.discountAmount + " Lei\n";
      }
      orderSummary += "Total Final: " + order.finalTotal + " Lei\n";
      
      document.getElementById("orderDetailsInput").value = orderSummary;
      document.getElementById("notifyForm").submit();
      alert("Comanda a fost plasată. Mulțumim, " + name + "!");
      
      let ordersLocal = JSON.parse(localStorage.getItem("globalOrders") || "[]");
      ordersLocal.push(order);
      localStorage.setItem("globalOrders", JSON.stringify(ordersLocal));
      
      renderOrderDetails(order);
      cart = [];
      updateCartCount();
      document.getElementById('customer-name').value = "";
      document.getElementById('customer-contact').value = "";
      document.getElementById('discount-code').value = "";
      updateFinalTotal();
      renderProducts();
      navigateTo('order-details');
    }

    function renderOrderDetails(order) {
      const container = document.getElementById('order-details-container');
      let html = `<p><strong>Client:</strong> ${order.customer.name}</p>
                  <p><strong>Contact:</strong> ${order.customer.contact}</p>
                  <p><strong>Total Inițial:</strong> ${order.orderTotal} Lei</p>`;
      if(order.discountPercent > 0) {
        html += `<p><strong>Cod Reducere:</strong> ${order.discountCode} (${order.discountPercent}%)</p>
                 <p><strong>Valoare Reducere:</strong> ${order.discountAmount} Lei</p>`;
      }
      html += `<p><strong>Total Final:</strong> ${order.finalTotal} Lei</p>
               <table class="table">
                 <thead>
                   <tr>
                     <th>Produs</th>
                     <th>Unități</th>
                     <th>Cost</th>
                   </tr>
                 </thead>
                 <tbody>`;
      order.items.forEach(item => {
        const prod = products.find(p => p.id === item.id);
        let info = prod.name;
        if(prod.type === "variant")
          info += ` (${prod.variants[item.variantIndex].weight}g)`;
        html += `<tr>
                   <td>${info}</td>
                   <td>${item.units}</td>
                   <td>${item.cost.toFixed(2)} Lei</td>
                 </tr>`;
      });
      html += `</tbody></table>`;
      container.innerHTML = html;
    }

    // Slider pe pagina de start
    function renderSlider() {
      const sliderTrack = document.getElementById("slider-track");
      if(!sliderTrack) return;
      sliderTrack.innerHTML = "";
      products.slice(0, 5).forEach(prod => {
        const img = document.createElement("img");
        img.src = prod.image;
        img.alt = prod.name;
        sliderTrack.appendChild(img);
      });
    }

    document.addEventListener("DOMContentLoaded", function() {
      renderProducts();
      renderSlider();
    });

    // Secțiunea Admin
    let adminLogged = false;
    function loadAdmin() {
      const adminDiv = document.getElementById('admin-content');
      if(!adminLogged) {
        adminDiv.innerHTML = `
          <div class="section-container text-start">
            <h2>Login Admin</h2>
            <div class="mb-3">
              <label>Utilizator:</label>
              <input type="text" id="admin-user" class="form-control">
            </div>
            <div class="mb-3">
              <label>Parolă:</label>
              <input type="password" id="admin-pass" class="form-control">
            </div>
            <button class="btn btn-primary" onclick="adminLogin()">Login</button>
          </div>`;
      } else {
        adminDiv.innerHTML = `
          <div class="section-container">
            <h2>Dashboard Admin</h2>
            <div class="mb-3">
              <button class="btn btn-secondary" onclick="updateAllStocks()">Actualizează stocurile</button>
            </div>
            <h5>Filtrare Produse</h5>
            <input type="text" id="admin-filter" class="form-control mb-3" placeholder="Caută produs în admin..." onkeyup="renderAdminProducts()">
            <div id="admin-products-container" class="mb-4"></div>
            <h5>Comenzi Plasate</h5>
            <div id="admin-orders-container"></div>
            <button class="btn btn-secondary mt-3" onclick="adminLogout()">Logout</button>
          </div>`;
        renderAdminProducts();
        renderAdminOrders();
      }
    }

    function adminLogin() {
      const user = document.getElementById('admin-user').value.trim();
      const pass = document.getElementById('admin-pass').value.trim();
      if(user === "admin" && pass === "parola123") {
        adminLogged = true;
        loadAdmin();
      } else {
        alert("Autentificare eșuată!");
      }
    }

    function adminLogout() {
      adminLogged = false;
      loadAdmin();
    }

    // Actualizează stocurile: pentru fiecare produs, adminul poate actualiza stocurile separate (la variante pentru produsele variant)
    function updateAllStocks() {
      products.forEach(prod => {
        if(prod.type === "variant") {
          prod.variants.forEach((variant, idx) => {
            const input = document.getElementById(`new-stock-${prod.id}-${idx}`);
            if(input) {
              const newStock = parseInt(input.value) || variant.stock;
              variant.stock = newStock;
            }
          });
        } else {
          const input = document.getElementById(`new-stock-${prod.id}`);
          if(input) {
            prod.stock = parseInt(input.value) || prod.stock;
          }
        }
      });
      alert("Stocurile au fost actualizate.");
      renderProducts();
      renderAdminProducts();
    }

    function renderAdminProducts() {
      const container = document.getElementById('admin-products-container');
      container.innerHTML = "";
      const filter = document.getElementById('admin-filter').value.toLowerCase();
      products.forEach(prod => {
        if(prod.name.toLowerCase().includes(filter)) {
          let stockHtml = "";
          if(prod.type === "variant") {
            prod.variants.forEach((v, idx) => {
              stockHtml += `<div style="margin-bottom: 5px;">
                <strong>${v.weight}g:</strong> ${v.stock} buc
                <br><input type="number" id="new-stock-${prod.id}-${idx}" placeholder="Nou stoc" style="width:70px; margin-top:3px;">
              </div>`;
            });
          } else {
            stockHtml = `<strong>Stoc:</strong> ${prod.stock} buc<br>
              <input type="number" id="new-stock-${prod.id}" placeholder="Nou stoc" style="width:70px; margin-top:3px;">`;
          }
          const prodHTML = `
            <div class="mb-2 p-2" style="border:1px solid #ccc; border-radius:5px;">
              <strong>${prod.name}</strong><br>
              ${stockHtml}
            </div>`;
          container.innerHTML += prodHTML;
        }
      });
    }

    function renderAdminOrders() {
      let orders = JSON.parse(localStorage.getItem("globalOrders") || "[]");
      const container = document.getElementById('admin-orders-container');
      if(orders.length === 0) {
        container.innerHTML = "<p>Nu există comenzi.</p>";
        return;
      }
      let html = `<table class="table">
                    <thead>
                      <tr>
                        <th>ID Comandă</th>
                        <th>Client</th>
                        <th>Detalii Produse</th>
                        <th>Total Final</th>
                        <th>Acțiuni</th>
                      </tr>
                    </thead>
                    <tbody>`;
      orders.forEach((order, idx) => {
        let details = "";
        order.items.forEach(item => {
          const prod = products.find(p => p.id === item.id);
          if(prod.type === "variant")
            details += "Produs ID: " + item.id + " - " + item.units + " unități, variantă: " + prod.variants[item.variantIndex].weight + "g<br>";
          else
            details += "Produs ID: " + item.id + " - " + item.units + " unități<br>";
        });
        html += `<tr>
                   <td>${order.id}</td>
                   <td>${order.customer.name}<br>${order.customer.contact}</td>
                   <td>${details}</td>
                   <td>${order.finalTotal} Lei</td>
                   <td>
                     <button class="btn btn-success btn-sm" onclick="finishOrder(${idx})">Terminată</button>
                     <button class="btn btn-info btn-sm" onclick="printInvoice(${idx})">Tipărește Factura</button>
                   </td>
                 </tr>`;
      });
      html += `</tbody></table>`;
      container.innerHTML = html;
    }

    function finishOrder(index) {
      let orders = JSON.parse(localStorage.getItem("globalOrders") || "[]");
      if(index >= 0 && index < orders.length) {
        orders.splice(index, 1);
        localStorage.setItem("globalOrders", JSON.stringify(orders));
        alert("Comanda a fost finalizată.");
        renderAdminOrders();
      }
    }

    function printInvoice(index) {
      let orders = JSON.parse(localStorage.getItem("globalOrders") || "[]");
      if(orders.length <= index) return;
      const order = orders[index];
      let invoiceWindow = window.open("", "PrintInvoice", "width=800,height=600");
      let htmlContent = `
        <html>
        <head>
          <title>Factura - Comanda ${order.id}</title>
          <style>
            body { font-family: "Times New Roman", Times, serif; padding: 20px; text-align: center; }
            h2, p, table { margin: 0 0 10px; padding: 0; text-align: center; }
            table { width: 100%; border-collapse: collapse; }
            table, th, td { border: 1px solid #000; }
            th, td { padding: 5px; text-align: center; }
          </style>
        </head>
        <body>
          <h2>Factura - Comanda ${order.id}</h2>
          <p><strong>Client:</strong> ${order.customer.name}</p>
          <p><strong>Contact:</strong> ${order.customer.contact}</p>
          <p><strong>Total Inițial:</strong> ${order.orderTotal} Lei</p>`;
      if(order.discountPercent > 0) {
        htmlContent += `<p><strong>Cod Reducere:</strong> ${order.discountCode} (${order.discountPercent}%)</p>
                        <p><strong>Valoare Reducere:</strong> ${order.discountAmount} Lei</p>`;
      }
      htmlContent += `<p><strong>Total Final:</strong> ${order.finalTotal} Lei</p>
          <table>
            <thead>
              <tr>
                <th>Produs</th>
                <th>Unități</th>
                <th>Cost</th>
              </tr>
            </thead>
            <tbody>`;
      order.items.forEach(item => {
        const prod = products.find(p => p.id === item.id);
        let info = prod.name;
        if(prod.type === "variant")
          info += ` (${prod.variants[item.variantIndex].weight}g)`;
        htmlContent += `<tr>
                          <td>${info}</td>
                          <td>${item.units}</td>
                          <td>${item.cost.toFixed(2)} Lei</td>
                        </tr>`;
      });
      htmlContent += `</tbody></table>
          </body>
          </html>`;
      invoiceWindow.document.write(htmlContent);
      invoiceWindow.document.close();
      invoiceWindow.focus();
      invoiceWindow.print();
    }

    // Slider pe pagina de start
    function renderSlider() {
      const sliderTrack = document.getElementById("slider-track");
      if(!sliderTrack) return;
      sliderTrack.innerHTML = "";
      products.slice(0, 5).forEach(prod => {
        const img = document.createElement("img");
        img.src = prod.image;
        img.alt = prod.name;
        sliderTrack.appendChild(img);
      });
    }

    document.addEventListener("DOMContentLoaded", function() {
      renderProducts();
      renderSlider();
    });

  </script>
</body>
</html>
